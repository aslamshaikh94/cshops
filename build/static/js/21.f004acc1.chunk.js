(this.webpackJsonpcshops=this.webpackJsonpcshops||[]).push([[21],{128:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return o}));var n=a(44),c=a(0),l=a.n(c),r=function(e){var t=e.col,a=e.formgroup,c=Object(n.a)(e,["col","formgroup"]);return l.a.createElement("div",{className:"form-group ".concat(a," ").concat(t?"col-lg-"+t+" col-12":"")},l.a.createElement("input",Object.assign({},c,{className:"form-control"})))},o=function(e){var t=e.col,a=Object(n.a)(e,["col"]);return l.a.createElement("div",{className:"form-group col-lg-".concat(t," col-12")},l.a.createElement("textarea",Object.assign({},a,{className:"form-control"})))}},224:function(e,t,a){"use strict";a.r(t);var n=a(32),c=a.n(n),l=a(42),r=a(47),o=a(45),s=a(6),u=a(14),i=a(0),m=a.n(i),d=a(137),p=a(221),f=a(121),b=a(118),g=a(122),E=a(220),h=a(120),v=a(117),y=a(9),O=a(196);function j(){var e=Object(O.a)(["  \n\n.tags-input {\n    display: flex;\n    align-items: center;\n    flex-wrap: wrap;\n    padding:5px 8px;\n    border-bottom: 1px solid rgb(214, 216, 218);\n    border-radius: 0px;\n    background:#fff;    \n    &:focus-within {\n        border: 1px solid #0052cc;\n    }\n    input {\n        flex: 1;\n        border: none;\n        &:focus {\n            outline: transparent;\n        }\n    }\n}\n\n#tags {\n    display: flex;\n    flex-wrap: wrap;\n    padding: 0;\n    margin: 0;\n}\n\n.tag {\n    width: auto;    \n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: #fff;\n    padding: 2px 10px;    \n    list-style: none;\n    border-radius: 6px;\n    margin: 2px 2px;\n    background: #004c8a;    \n    .tag-close-icon {\n        display: block;\n        width: 16px;\n        height: 16px;\n        line-height: 16px;\n        text-align: center;\n        font-size: 14px;\n        margin-left: 8px;\n        color: #0052cc;\n        border-radius: 50%;\n        background: #fff;\n        cursor: pointer;\n    }\n}\n\n  @media screen and (max-width: 567px) {\n      .tags-input {\n          width: calc(100vw - 32px);\n      }\n  }\n"]);return j=function(){return e},e}var x=a(197).a.div(j()),N=function(e){var t=m.a.useState([]),a=Object(u.a)(t,2),n=a[0],c=a[1];return m.a.createElement(x,null,m.a.createElement("div",{className:"tags-input"},m.a.createElement("ul",{id:"tags"},n?n.map((function(e,t){return m.a.createElement("li",{key:t,className:"tag"},m.a.createElement("span",{className:"tag-title"},e),m.a.createElement("span",{className:"tag-close-icon",onClick:function(){return e=t,void c(Object(o.a)(n.filter((function(t,a){return a!==e}))));var e}},"x"))})):null),m.a.createElement("input",{type:"text",onKeyUp:function(t){return"Enter"===t.key?function(t){""!==t.target.value&&(c([].concat(Object(o.a)(n),[t.target.value])),e.selectedTags([].concat(Object(o.a)(n),[t.target.value])),t.target.value="")}(t):null},placeholder:e.placeholder})))},C=a(222);var w=function(e){var t=Object(i.useState)(!1),a=Object(u.a)(t,2),n=a[0],c=a[1],l=Object(i.useState)(!1),r=Object(u.a)(l,2),s=r[0],d=r[1],p=Object(i.useState)([]),f=Object(u.a)(p,2),b=f[0],h=f[1];return Object(i.useEffect)((function(){y.a.get("/upload").then((function(e){d(e.data)}))}),[]),m.a.createElement(m.a.Fragment,null,m.a.createElement(g.a,{className:"bg_green mt-2",onClick:function(){return c(!0)}},"Select to Gallery"),m.a.createElement(C.a,{backdrop:"static",scrollable:!0,show:n,onHide:function(){return c(!1)},size:"xl","aria-labelledby":"example-custom-modal-styling-title"},m.a.createElement(C.a.Header,{closeButton:!0},m.a.createElement(C.a.Title,{id:"example-custom-modal-styling-title"},"Image Gallery")),m.a.createElement(C.a.Body,null,m.a.createElement("div",{className:"row no-gutters"},s?s.map((function(e){var t=b.some((function(t){return t.id===e.public_id}));return m.a.createElement("div",{className:"col-lg-1 col-4",key:e.public_id,onClick:function(t){return a=e.public_id,void s.find((function(e){new Promise((function(t,n){e.public_id===a&&t({url:e.secure_url,id:e.public_id})})).then((function(e){h([].concat(Object(o.a)(b),[e]))}))}));var a}},m.a.createElement(E.a,{src:e.secure_url,style:{height:"120px",width:"120px"},className:t?"border border-success":null,thumbnail:!0}))})):null)),m.a.createElement(C.a.Footer,null,m.a.createElement(g.a,{variant:"primary",onClick:function(){e.selected(b),c(!1)}},"Select & Close"))))},_=a(128),k=a(20),P=a(200),S=a.n(P),T=(a(202),a(13)),R=a(39);t.default=Object(i.memo)((function(e){var t=Object(i.useContext)(R.a),a=(t.data,t.dispatch),n=Object(i.useState)([]),O=Object(u.a)(n,2),j=O[0],x=O[1],C=Object(i.useState)(""),P=Object(u.a)(C,2),D=P[0],V=P[1],U=Object(i.useRef)(),F=Object(i.useRef)(),H=Object(k.useToasts)().addToast,J=Object(i.useState)([]),z=Object(u.a)(J,2),A=z[0],B=z[1],L=Object(i.useState)(0),M=Object(u.a)(L,1)[0],G=Object(i.useState)(!1),I=Object(u.a)(G,2),W=I[0],K=I[1],q=Object(i.useRef)(null),Q=Object(i.useState)(e.data),X=Object(u.a)(Q,2),Y=X[0],Z=X[1],$={appearance:"error",autoDismiss:!0,autoDismissTimeout:2e3};Object(i.useEffect)((function(){var e=JSON.stringify({display:M,photosurl:A});Y&&A.length>0&&Z(Object(s.a)(Object(s.a)({},Y),{},{photos:e,thumbnail:A[0].url}))}),[A,M]),Object(i.useEffect)((function(){var e=JSON.stringify(j);j.length>0&&Z(Object(s.a)(Object(s.a)({},Y),{},{extra_fields:e}))}),[j]);function ee(){return Y.categories?Y.type?Y.product_name?Y.selling_price&&Y.selling_price?Y.venders_price?Y.stock?Y.warranty?Y.details&&Y.terms_conditions?!(Y.photos.length<=2)||(H("Please select photos",$),!1):(H("Please enter details",$),!1):(H("Please enter warranty",$),!1):(H("Please enter stock",$),!1):(H("Please enter venders price",$),!1):(H("Please enter selling price",$),!1):(H("Please enter product name",$),!1):(H("Please select type",$),!1):(H("Please select catagory",$),!1)}function te(){return(te=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1===t||!q){e.next=6;break}return K(!0),e.next=4,q.current.getCroppedCanvas().toDataURL("image/jpeg");case 4:ae(e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e){y.a.post("/upload",{image:e}).then((function(e){console.log(e.data),!1===e.data.status?H(e.data.message,$):B([].concat(Object(o.a)(A),[e.data])),K(!1)}))}Object(i.useEffect)((function(){if(e.data&&e.data.photos){var t=JSON.parse(e.data.photos);B(t.photosurl)}}),[e.data.photos]),Object(i.useEffect)((function(){if(e.data&&e.data.extra_fields){var t=JSON.parse(e.data.extra_fields);x(t)}}),[e.data.extra_fields]);var ne=function(){y.a.get("/product/admin/products").then((function(e){!1!==e.data.status&&a({type:"FETCH_PRODUCTS",payload:e.data})}))},ce=function(e){var t=e.target.name,a=e.target.value;Z(Object(s.a)(Object(s.a)({},Y),{},Object(l.a)({},t,a)))};return m.a.createElement("div",{className:"p-3 mb-3 border-bottom"},m.a.createElement(d.a,null,m.a.createElement(d.a.Row,null,m.a.createElement("div",{className:"form-group col-lg-3 col-12"},m.a.createElement(d.a.Control,{as:"select",name:"categories",onChange:function(e){return ce(e)}},m.a.createElement("option",null,"Choose Categories"),m.a.createElement("option",{value:"industrial"},"Industrial"),m.a.createElement("option",{value:"construction"},"Construction"),m.a.createElement("option",{value:"agriculture"},"Agriculture"),m.a.createElement("option",{value:"housewares"},"Housewares"))),m.a.createElement("div",{className:"form-group col-lg-3 col-12"},m.a.createElement(d.a.Control,{as:"select",name:"type",onChange:function(e){return ce(e)}},m.a.createElement("option",null,"Choose Type"),m.a.createElement("option",{value:"Hand Tools"},"Hand Tools"),m.a.createElement("option",{value:"Automobile"},"Automobile"),m.a.createElement("option",{value:"Furniture"},"Furniture"),m.a.createElement("option",{value:"electrical"},"Electrical"))),m.a.createElement(_.a,{col:3,name:"brand_name",placeholder:"Brand Name",type:"text",defaultValue:Y.brand_name,onChange:function(e){return ce(e)}}),m.a.createElement(_.a,{col:3,name:"product_name",placeholder:"Product Name",type:"text",defaultValue:Y.product_name,onChange:function(e){return ce(e)}}),m.a.createElement(_.a,{col:3,name:"purchase_price",placeholder:"Purchase Price",type:"number",defaultValue:Y.purchase_price,onChange:function(e){return ce(e)}}),m.a.createElement(_.a,{col:3,name:"selling_price",placeholder:"Selling Price",type:"number",defaultValue:Y.selling_price,onChange:function(e){return ce(e)}}),m.a.createElement(_.a,{col:3,name:"venders_price",placeholder:"Venders Price",type:"number",defaultValue:Y.venders_price,onChange:function(e){return ce(e)}}),m.a.createElement(_.a,{col:3,name:"stock",placeholder:"Stock",type:"number",defaultValue:Y.stock,onChange:function(e){return ce(e)}}),m.a.createElement(_.a,{col:3,name:"minorder",placeholder:"Min Order",type:"number",defaultValue:Y.minorder,onChange:function(e){return ce(e)}}),m.a.createElement(_.a,{col:3,name:"warranty",placeholder:"Warranty in Months",type:"number",defaultValue:Y.warranty,onChange:function(e){return ce(e)}}),m.a.createElement("div",{className:"col-12 col-lg-6"},m.a.createElement(N,{selectedTags:function(e){var t=JSON.stringify(e);Z(Object(s.a)(Object(s.a)({},Y),{},{keywords:t}))},placeholder:"Add search keyword"}))),m.a.createElement(d.a.Row,null,m.a.createElement("div",{className:"ml-1"},j?j.map((function(e,t){return m.a.createElement(p.a,{className:"bg_yellow white ml-1",key:e.name+t}," ","".concat(e.name," : ").concat(e.value))})):null),m.a.createElement("div",{className:"col-12 col-lg-4"},m.a.createElement(f.a,{className:"mb-3",size:"sm"},m.a.createElement(b.a,{placeholder:"Title",ref:U}),m.a.createElement(b.a,{placeholder:"Value",ref:F}),m.a.createElement(f.a.Prepend,null,m.a.createElement(g.a,{size:"sm",variant:"",className:"btn_green",type:"button",onClick:function(e){return function(){var e=U.current.value,t=F.current.value;e&&t&&(x([].concat(Object(o.a)(j),[{name:e,value:t}])),U.current.value="",F.current.value="")}()}},m.a.createElement("i",{className:"fal fa-plus"})," Add More"))))),m.a.createElement(d.a.Row,null,m.a.createElement(_.b,{col:6,name:"details",placeholder:"Details",value:Y.details,onChange:function(e){return ce(e)}}),m.a.createElement(_.b,{col:6,name:"terms_conditions",placeholder:"Terms and Conditions",value:Y.terms_conditions,onChange:function(e){return ce(e)}})),m.a.createElement(d.a.Row,null,m.a.createElement("div",{className:"col-lg-6"},m.a.createElement("div",{className:"custom-file"},m.a.createElement("input",{type:"file",className:"custom-file-input",onChange:function(e){return function(e){var t=window.URL.createObjectURL(e.target.files[0]);V(t)}(e)}}),m.a.createElement("label",{className:"custom-file-label",htmlFor:"customFile"},"Choose file")),D?m.a.createElement("div",{className:"mt-2 mb-2"},m.a.createElement(S.a,{ref:q,src:D,style:{maxHeight:400,maxWidth:600,width:"100%"},aspectRatio:1,guides:!1})):null,D?m.a.createElement("div",null,m.a.createElement("button",{type:"button",className:"btn btn_orange",onClick:function(e){return V(!1),void y.a.get("/product/admin/products").then((function(e){!1!==e.data.status&&a({type:"FETCH_PRODUCTS",payload:e.data})}))}},"Cancel"),m.a.createElement("button",{type:"button",className:"btn btn_blue ml-2",onClick:function(e){return function(e){return te.apply(this,arguments)}(e)},disabled:!!W},W?m.a.createElement("span",null,m.a.createElement("span",{className:"spinner-grow spinner-grow-sm"}),"Uploading.."):m.a.createElement("span",null,"Crop & Upload"))):null),m.a.createElement("div",{className:"col-lg-6"},Y.thumbnail?m.a.createElement("div",{className:"mb-2 d-flex flex-column"},m.a.createElement(E.a,{src:Y.thumbnail,style:{border:"2px solid green"},className:"img-fluid",width:"100"}),m.a.createElement("small",null,"Product Thumbnail")):null,m.a.createElement(h.a,null,A&&A.length>0?A.map((function(e,t){return m.a.createElement(v.a,{xs:6,md:2,key:e.id},m.a.createElement("div",{style:{border:"2px solid #dee2e6"}},m.a.createElement("div",{className:"p-1 d-flex justify-content-between"},m.a.createElement(T.Radio,{name:"thumb",size:.8,onClick:function(e){return function(e){Z(Object(s.a)(Object(s.a)({},Y),{},{thumbnail:A[e].url}))}(t)}}),m.a.createElement("i",{className:"fal fa-times",onClick:function(e){return function(e){var t=A;t.splice(e,1),B(Object(o.a)(t))}(t)}})),m.a.createElement(E.a,{src:"".concat(e.url),className:"img-fluid"})))})):null)),m.a.createElement("div",{className:"col"},m.a.createElement(w,{selected:function(e){B([].concat(Object(o.a)(A),Object(o.a)(e)))}}))),m.a.createElement("div",{className:"d-flex justify-content-end"},e.create?m.a.createElement("button",{className:"btn btn-sm btn_blue",onClick:function(e){ee()&&y.a.post("/product/add",Y).then((function(e){!1===e.data.status?H(e.data.message,$):(ne(),H("Product added successfully",{appearance:"success",autoDismiss:!0,autoDismissTimeout:2e3}))}))},type:"button"},"Save Product"):m.a.createElement("button",{className:"btn btn-sm btn_blue",onClick:function(e){ee()&&y.a.put("/product",Y).then((function(e){console.log(e.data),!1===e.data.status?H(e.data.message,$):(ne(),H("Product 'updated' successfully",{appearance:"success",autoDismiss:!0,autoDismissTimeout:2e3}))}))},type:"button"},"Update Product"))))}))}}]);
//# sourceMappingURL=21.f004acc1.chunk.js.map