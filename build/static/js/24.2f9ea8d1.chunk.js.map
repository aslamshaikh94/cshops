{"version":3,"sources":["components/ImageGallery.js","admin/components/Productform.js"],"names":["ImageGallery","props","data","useContext","AppContext","useState","show","setShow","gallery","setGallery","images","setImages","useEffect","axios","get","API_URL","then","res","Fragment","Button","className","onClick","Modal","backdrop","scrollable","onHide","size","aria-labelledby","Header","closeButton","Title","id","Body","map","item","active","some","e","public_id","key","find","Promise","resolve","reject","url","secure_url","imgItem","Image","src","style","height","width","thumbnail","Footer","variant","selected","memo","dispatch","xfields","setXfields","srcDefault","setSrcDefault","fieldName","useRef","fieldValue","addToast","useToasts","fileData","setFileData","displayimg","imgLoging","setImgLoging","cropper","product","setProduct","errorSetting","appearance","autoDismiss","autoDismissTimeout","photo","JSON","stringify","display","photosurl","length","photos","fieldsData","extra_fields","productValidation","categories","type","product_name","selling_price","venders_price","stock","warranty","details","terms_conditions","a","current","getCroppedCanvas","toDataURL","uploadOnServer","post","image","console","log","status","message","parse","getProducts","getToken","payload","inputChange","name","target","value","Form","Row","Control","as","onChange","Inputfield","col","placeholder","defaultValue","purchase_price","minorder","i","Badge","InputGroup","FormControl","ref","Prepend","addField","window","URL","createObjectURL","files","uploadFiles","htmlFor","maxHeight","maxWidth","aspectRatio","guides","cropImg","disabled","border","Col","xs","md","setDisplay","newfileData","splice","removeImage","create","put"],"mappings":"+RAqFeA,MA/Ef,SAAsBC,GAAQ,IACrBC,EAAQC,qBAAWC,KAAnBF,KADoB,EAEHG,oBAAS,GAFN,mBAEpBC,EAFoB,KAEdC,EAFc,OAGGF,oBAAS,GAHZ,mBAGpBG,EAHoB,KAGXC,EAHW,OAICJ,mBAAS,IAJV,mBAIpBK,EAJoB,KAIZC,EAJY,KAgC3B,OA1BAC,qBAAU,WACRC,IAAMC,IAAN,UAAaZ,EAAKa,QAAlB,YAAoCC,MAAK,SAACC,GACxCR,EAAWQ,EAAIf,WAEjB,IAuBA,kBAAC,IAAMgB,SAAP,KACE,kBAACC,EAAA,EAAD,CAAQC,UAAU,gBAAgBC,QAAS,kBAAMd,GAAQ,KAAzD,qBAIA,kBAACe,EAAA,EAAD,CACEC,SAAS,SACTC,YAAU,EACVlB,KAAMA,EACNmB,OAAQ,kBAAMlB,GAAQ,IACtBmB,KAAK,KACLC,kBAAgB,sCAEhB,kBAACL,EAAA,EAAMM,OAAP,CAAcC,aAAW,GACvB,kBAACP,EAAA,EAAMQ,MAAP,CAAaC,GAAG,sCAAhB,kBAIF,kBAACT,EAAA,EAAMU,KAAP,KACE,yBAAKZ,UAAU,kBAEbZ,EAAUA,EAAQyB,KAAI,SAACC,GACnB,IAAIC,EAASzB,EAAO0B,MAAK,SAAAC,GAAC,OAAGA,EAAEN,KAAKG,EAAKI,aACzC,OACE,yBAAKlB,UAAU,iBAAkBmB,IAAKL,EAAKI,UAAWjB,QAAS,SAAAgB,GAAC,OA7C3DN,EA6CyEG,EAAKI,eA5CjF9B,EAAQgC,MAAK,SAACN,GAC1B,IAAIO,SAAQ,SAACC,EAASC,GACjBT,EAAKI,YAAYP,GAKlBW,EAJY,CACVE,IAAIV,EAAKW,WACTd,GAAGG,EAAKI,eAIXtB,MAAK,SAAC8B,GAAWnC,EAAU,GAAD,mBAAKD,GAAL,CAAaoC,WAVhD,IAAqBf,IA8CH,kBAACgB,EAAA,EAAD,CAAOC,IAAKd,EAAKW,WACVI,MAAO,CAACC,OAAO,QAASC,MAAM,SAC9B/B,UAAWe,EAAQ,wBAAyB,KAC5CiB,WAAS,QAIvB,OAIL,kBAAC9B,EAAA,EAAM+B,OAAP,KACE,kBAAClC,EAAA,EAAD,CAAQmC,QAAQ,UAAUjC,QA3ClC,WACEpB,EAAMsD,SAAS7C,GACfH,GAAQ,KAyCF,sB,4DC2TKiD,0BAxXI,SAACvD,GAAS,IAAD,EACFE,qBAAWC,KAA7BF,EADoB,EACpBA,KAAMuD,EADc,EACdA,SADc,EAEGpD,mBAAS,IAFZ,mBAEpBqD,EAFoB,KAEXC,EAFW,OAGStD,mBAAS,IAHlB,mBAGpBuD,EAHoB,KAGRC,EAHQ,KAIrBC,EAAYC,mBACZC,EAAaD,mBACXE,EAAaC,sBAAbD,SANmB,EAOK5D,mBAAS,IAPd,mBAOpB8D,EAPoB,KAOVC,EAPU,OAQS/D,mBAAS,GARlB,mBAQpBgE,EARoB,aASOhE,oBAAS,IAThB,mBASpBiE,EAToB,KASTC,EATS,KAUrBC,EAAUT,iBAAO,MAVI,EAWG1D,mBAASJ,EAAMC,MAXlB,mBAWpBuE,EAXoB,KAWXC,GAXW,KAavBC,GAAe,CAAEC,WAAY,QAASC,aAAY,EAAOC,mBAAoB,KAGjFlE,qBAAU,WACT,IAAImE,EAAQC,KAAKC,UAAU,CAACC,QAAQb,EAAYc,UAAUhB,IACvDM,GAAWN,EAASiB,OAAO,GAC7BV,GAAW,2BAAID,GAAL,IAAcY,OAAON,EAAO3B,UAAUe,EAAS,GAAGvB,SAE3D,CAACuB,EAAUE,IAEdzD,qBAAU,WACT,IAAI0E,EAAaN,KAAKC,UAAUvB,GAC7BA,EAAQ0B,OAAO,GAAGV,GAAW,2BAAID,GAAL,IAAcc,aAAaD,OACzD,CAAC5B,IA0BH,SAAS8B,KACR,OAAIf,EAAQgB,WAIHhB,EAAQiB,KAIRjB,EAAQkB,aAIRlB,EAAQmB,eAIRnB,EAAQmB,cAIRnB,EAAQoB,cAIRpB,EAAQqB,MAIRrB,EAAQsB,SAIRtB,EAAQuB,SAIRvB,EAAQwB,mBAITxB,EAAQY,OAAOD,QAAQ,KAC9BnB,EAAS,uBAAwBU,KAC1B,IATPV,EAAS,uBAAwBU,KAC1B,IALPV,EAAS,wBAAyBU,KAC3B,IALPV,EAAS,qBAAsBU,KACxB,IALPV,EAAS,6BAA8BU,KAChC,IATPV,EAAS,6BAA8BU,KAChC,IALPV,EAAS,4BAA6BU,KAC/B,IALPV,EAAS,qBAAsBU,KACxB,IALPV,EAAS,yBAA0BU,KAC5B,GAvDkB,8CAqG3B,WAAuBtC,GAAvB,SAAA6D,EAAA,0DACQ,IAAJ7D,IAAamC,EADjB,uBAEED,GAAa,GAFf,SAG0BC,EAAQ2B,QAAQC,mBAAmBC,UAAU,cAHvE,OAIIC,GAJJ,oDArG2B,sBA6G1B,SAASA,GAAe1D,GACxB/B,IAAM0F,KAAN,UAAcrG,EAAKa,QAAnB,WAAqC,CAACyF,MAAM5D,IAAM5B,MAAK,SAACC,GACxDwF,QAAQC,IAAIzF,EAAIf,OACQ,IAAlBe,EAAIf,KAAKyG,OACX1C,EAAShD,EAAIf,KAAK0G,QAASjC,IAG5BP,EAAY,GAAD,mBAAKD,GAAL,CAAelD,EAAIf,QAE/BqE,GAAa,MAhFhB3D,qBAAU,WACR,GAAGX,EAAMC,MAAQD,EAAMC,KAAKmF,OAAO,CACnC,IAAIA,EAASL,KAAK6B,MAAM5G,EAAMC,KAAKmF,QAClCjB,EAAYiB,EAAOF,cAEpB,CAAClF,EAAMC,KAAKmF,SAEdzE,qBAAU,WACR,GAAGX,EAAMC,MAAQD,EAAMC,KAAKqF,aAAa,CAC1C,IAAIA,EAAeP,KAAK6B,MAAM5G,EAAMC,KAAKqF,cACxC5B,EAAW4B,MAEX,CAACtF,EAAMC,KAAKqF,eAgFd,IAiCMuB,GAAa,WAClBjG,IAAMC,IAAN,UAAaZ,EAAKa,QAAlB,2BAAoDgG,eAAa/F,MAAK,SAACC,IACjD,IAAlBA,EAAIf,KAAKyG,QAAgBlD,EAAS,CAACiC,KAAK,iBAAkBsB,QAAQ/F,EAAIf,WAGrE+G,GAAc,SAAC5E,GACpB,IAAI6E,EAAO7E,EAAE8E,OAAOD,KAChBE,EAAQ/E,EAAE8E,OAAOC,MACrB1C,GAAW,2BACPD,GADM,kBAERyC,EAAME,MAYT,OACC,yBAAKhG,UAAU,0BACd,kBAACiG,EAAA,EAAD,KACE,kBAACA,EAAA,EAAKC,IAAN,KACC,yBAAKlG,UAAU,8BACd,kBAACiG,EAAA,EAAKE,QAAN,CAAcC,GAAG,SAASN,KAAK,aAAaO,SAAU,SAAApF,GAAC,OAAE4E,GAAY5E,KAClE,qDACA,4BAAQ+E,MAAM,cAAd,cACA,4BAAQA,MAAM,gBAAd,gBACA,4BAAQA,MAAM,eAAd,eACA,4BAAQA,MAAM,cAAd,gBAGJ,yBAAKhG,UAAU,8BACb,kBAACiG,EAAA,EAAKE,QAAN,CAAcC,GAAG,SAASN,KAAK,OAAOO,SAAU,SAAApF,GAAC,OAAE4E,GAAY5E,KAC7D,+CACA,4BAAQ+E,MAAM,cAAd,cACA,4BAAQA,MAAM,cAAd,cACA,4BAAQA,MAAM,aAAd,aACA,4BAAQA,MAAM,cAAd,gBAGH,kBAACM,EAAA,EAAD,CAAYC,IAAK,EACXT,KAAK,eACLU,YAAY,eACZlC,KAAK,OACLmC,aAAcpD,EAAQkB,aACtB8B,SAAU,SAAApF,GAAC,OAAE4E,GAAY5E,MAEhC,kBAACqF,EAAA,EAAD,CAAYC,IAAK,EACXT,KAAK,iBACLU,YAAY,iBACZlC,KAAK,SACLmC,aAAcpD,EAAQqD,eACtBL,SAAU,SAAApF,GAAC,OAAE4E,GAAY5E,MAE/B,kBAACqF,EAAA,EAAD,CAAYC,IAAK,EACXT,KAAK,gBACLU,YAAY,gBACZlC,KAAK,SACLmC,aAAcpD,EAAQmB,cACtB6B,SAAU,SAAApF,GAAC,OAAE4E,GAAY5E,MAE/B,kBAACqF,EAAA,EAAD,CAAYC,IAAK,EACXT,KAAK,gBACLU,YAAY,gBACZlC,KAAK,SACLmC,aAAcpD,EAAQoB,cACtB4B,SAAU,SAAApF,GAAC,OAAE4E,GAAY5E,MAE/B,kBAACqF,EAAA,EAAD,CAAYC,IAAK,EACXT,KAAK,QACLU,YAAY,QACZlC,KAAK,SACLmC,aAAcpD,EAAQqB,MACtB2B,SAAU,SAAApF,GAAC,OAAE4E,GAAY5E,MAE/B,kBAACqF,EAAA,EAAD,CAAYC,IAAK,EACXT,KAAK,WACLU,YAAY,YACZlC,KAAK,SACLmC,aAAcpD,EAAQsD,SACtBN,SAAU,SAAApF,GAAC,OAAE4E,GAAY5E,MAE/B,kBAACqF,EAAA,EAAD,CAAYC,IAAK,EACXT,KAAK,WACLU,YAAY,qBACZlC,KAAK,SACLmC,aAAcpD,EAAQsB,SACtB0B,SAAU,SAAApF,GAAC,OAAE4E,GAAY5E,OAGjC,kBAACgF,EAAA,EAAKC,IAAN,KACC,yBAAKlG,UAAU,QAEbsC,EAASA,EAAQzB,KAAI,SAACC,EAAM8F,GAC3B,OACE,kBAACC,EAAA,EAAD,CAAO7G,UAAU,uBAAuBmB,IAAKL,EAAKgF,KAAKc,GAAvD,cAA+D9F,EAAKgF,KAApE,cAA8EhF,EAAKkF,WAGrF,MAGH,yBAAKhG,UAAU,mBACd,kBAAC8G,EAAA,EAAD,CAAY9G,UAAU,OAAOM,KAAK,MAChC,kBAACyG,EAAA,EAAD,CAAaP,YAAY,QAAQQ,IAAKtE,IACtC,kBAACqE,EAAA,EAAD,CAAaP,YAAY,QAAQQ,IAAKpE,IACtC,kBAACkE,EAAA,EAAWG,QAAZ,KACE,kBAAClH,EAAA,EAAD,CAAQO,KAAK,KAAK4B,QAAQ,GAAGlC,UAAU,YAAYsE,KAAK,SAASrE,QAAS,SAAAgB,GAAC,OArPnE,WAChB,IAAI6E,EAAQpD,EAAUqC,QAAQiB,MAC1BA,EAASpD,EAAWmC,QAAQiB,MAC7BF,GAAQE,IACVzD,EAAW,GAAD,mBAAKD,GAAL,CAAc,CAACwD,OAAME,YAC/BtD,EAAUqC,QAAQiB,MAAO,GACzBpD,EAAWmC,QAAQiB,MAAM,IA+O2DkB,KAC5E,uBAAGlH,UAAU,gBADd,iBAOL,kBAACiG,EAAA,EAAKC,IAAN,KACC,kBAAC,IAAD,CAAUK,IAAK,EACVT,KAAK,UACLU,YAAY,UACZR,MAAO3C,EAAQuB,QACfyB,SAAU,SAAApF,GAAC,OAAE4E,GAAY5E,MAE9B,kBAAC,IAAD,CAAUsF,IAAK,EACVT,KAAK,mBACLU,YAAY,uBACZR,MAAO3C,EAAQwB,iBACfwB,SAAU,SAAApF,GAAC,OAAE4E,GAAY5E,OAGhC,kBAACgF,EAAA,EAAKC,IAAN,KACE,yBAAKlG,UAAU,YACd,yBAAKA,UAAU,eACb,2BAAOsE,KAAK,OAAOtE,UAAU,oBAAoBqG,SAAU,SAAApF,GAAC,OAvKlD,SAACA,GAClB,IAAImE,EAAQ+B,OAAOC,IAAIC,gBAAgBpG,EAAE8E,OAAOuB,MAAM,IACtD7E,EAAc2C,GAqKuDmC,CAAYtG,MAC1E,2BAAOjB,UAAU,oBAAoBwH,QAAQ,cAA7C,gBAGDhF,EACC,yBAAKxC,UAAU,aACf,kBAAC,IAAD,CACKgH,IAAK5D,EACLxB,IAAKY,EACLX,MAAO,CAAC4F,UAAW,IAAKC,SAAU,IAAK3F,MAAM,QAE7C4F,YAAa,EACbC,QAAQ,KAIb,KAGCpF,EACC,6BACC,4BAAQ8B,KAAK,SAAStE,UAAU,iBAAiBC,QAAS,SAAAgB,GAAC,OA7IrEwB,GAAc,QACdhD,IAAMC,IAAN,UAAaZ,EAAKa,QAAlB,2BAAoDgG,eAAa/F,MAAK,SAACC,IACjD,IAAlBA,EAAIf,KAAKyG,QAAgBlD,EAAS,CAACiC,KAAK,iBAAkBsB,QAAQ/F,EAAIf,YA2IhE,UACA,4BAAQwF,KAAK,SAAStE,UAAU,oBAAoBC,QAAS,SAAAgB,GAAC,OA/T9C,4CA+TgD4G,CAAQ5G,IAAI6G,WAAU5E,GAEpFA,EACC,8BACC,0BAAMlD,UAAU,iCADjB,eAGC,iDAIL,MAGN,yBAAKA,UAAU,YAEbqD,EAAQrB,UACP,yBAAKhC,UAAU,2BACd,kBAAC2B,EAAA,EAAD,CAAOC,IAAKyB,EAAQrB,UAChBH,MAAO,CAACkG,OAAO,mBACf/H,UAAU,YAAY+B,MAAM,QAChC,qDAED,KAEF,kBAACmE,EAAA,EAAD,KACEnD,GAAYA,EAASiB,OAAO,EAAGjB,EAASlC,KAAI,SAACC,EAAM8F,GACjD,OACE,kBAACoB,EAAA,EAAD,CAAKC,GAAI,EAAGC,GAAI,EAAG/G,IAAKL,EAAKH,IAC5B,yBAAKkB,MAAO,CAACkG,OAAO,sBACnB,yBAAK/H,UAAU,sCACd,kBAAC,QAAD,CAAO8F,KAAK,QAAQxF,KAAM,GAAKL,QAAS,SAAAgB,GAAC,OA9NtD,SAAoB2F,GACnBtD,GAAW,2BAAID,GAAL,IAAcrB,UAAUe,EAAS6D,GAAGpF,OA6NS2G,CAAWvB,MACtD,uBAAG5G,UAAU,eAAeC,QAAS,SAAAgB,GAAC,OApOnD,SAAqB2F,GACpB,IAAIwB,EAAcrF,EAClBqF,EAAYC,OAAOzB,EAAG,GACtB5D,EAAY,YAAIoF,IAiOoCE,CAAY1B,OAEpD,kBAACjF,EAAA,EAAD,CAAOC,IAAG,UAAKd,EAAKU,KAAOxB,UAAU,mBAIzC,OAGN,yBAAKA,UAAU,OACd,kBAAC,EAAD,CAAcmC,SAlLnB,SAAwB7C,GACvB0D,EAAY,GAAD,mBAAKD,GAAL,YAAkBzD,UAoL1B,yBAAKU,UAAU,8BAEbnB,EAAM0J,OACL,4BAAQvI,UAAU,sBAAsBC,QAAS,SAAAgB,GAvOxCmD,MAEd3E,IAAM0F,KAAN,UAAcrG,EAAKa,QAAnB,gBAA0C0D,EAASsC,eAAa/F,MAAK,SAACC,IAChD,IAAlBA,EAAIf,KAAKyG,OACX1C,EAAShD,EAAIf,KAAK0G,QAASjC,KAG3BmC,KACA7C,EAAS,6BAA8B,CAAEW,WAAY,UAAWC,aAAY,EAAOC,mBAAoB,WA+N/BY,KAAK,UAA1E,gBAEC,4BAAQtE,UAAU,sBAAsBC,QAAS,SAAAgB,GA3NzCmD,MAEd3E,IAAM+I,IAAN,UAAa1J,EAAKa,QAAlB,YAAqC0D,EAASsC,eAAa/F,MAAK,SAACC,GAChEwF,QAAQC,IAAIzF,EAAIf,OACK,IAAlBe,EAAIf,KAAKyG,OACX1C,EAAShD,EAAIf,KAAK0G,QAASjC,KAG3BmC,KACA7C,EAAS,iCAAkC,CAAEW,WAAY,UAAWC,aAAY,EAAOC,mBAAoB,WAkNhCY,KAAK,UAA5E","file":"static/js/24.2f9ea8d1.chunk.js","sourcesContent":["import React, {useState, useEffect, useContext} from 'react';\r\nimport {Modal, Button, Image} from 'react-bootstrap';\r\nimport axios from 'axios';\r\n\r\nimport {AppContext} from '../App';\r\n\r\nfunction ImageGallery(props) {\r\n  const {data} = useContext(AppContext);  \r\n  const [show, setShow] = useState(false);\r\n  const [gallery, setGallery] = useState(false);\r\n  const [images, setImages] = useState([]);\r\n\r\n  useEffect(()=>{\r\n    axios.get(`${data.API_URL}/upload`).then((res)=>{\r\n      setGallery(res.data)\r\n    })\r\n  },[])\r\n\r\n  function selectImage(id){\r\n    let findImage = gallery.find((item)=>{\r\n        new Promise((resolve, reject)=>{\r\n          if(item.public_id===id){          \r\n            let  photo ={\r\n              url:item.secure_url,\r\n              id:item.public_id\r\n            }\r\n            resolve(photo)                      \r\n          }\r\n        }).then((imgItem)=>{setImages([...images, imgItem])})\r\n    })\r\n    \r\n  }\r\n  \r\n  function selectClose(){\r\n    props.selected(images)\r\n    setShow(false)\r\n  }\r\n  \r\n  return (\r\n    <React.Fragment>\r\n      <Button className=\"bg_green mt-2\" onClick={() => setShow(true)}>\r\n        Select to Gallery\r\n      </Button>\r\n\r\n      <Modal\r\n        backdrop='static'\r\n        scrollable\r\n        show={show}\r\n        onHide={() => setShow(false)}\r\n        size=\"xl\"\r\n        aria-labelledby=\"example-custom-modal-styling-title\"\r\n      >\r\n        <Modal.Header closeButton>\r\n          <Modal.Title id=\"example-custom-modal-styling-title\">\r\n           Image Gallery\r\n          </Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <div className=\"row no-gutters\">\r\n            {\r\n            gallery?  gallery.map((item)=>{\r\n                let active = images.some(e=> e.id===item.public_id)                \r\n                return (\r\n                  <div className=\"col-lg-1 col-4\"  key={item.public_id} onClick={e=>selectImage(item.public_id)}>\r\n                    <Image src={item.secure_url} \r\n                           style={{height:'120px', width:'120px'}} \r\n                           className={active? \"border border-success\" :null}\r\n                           thumbnail />\r\n                  </div>\r\n                  )\r\n              })\r\n            :null\r\n            }\r\n          </div>\r\n        </Modal.Body>\r\n        <Modal.Footer>          \r\n          <Button variant=\"primary\" onClick={selectClose}>\r\n            Select & Close\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default ImageGallery","import React, {useState, useEffect, memo, useContext, useRef} from 'react';\r\nimport {Button, Form, Col, Image, Row, InputGroup, FormControl, Badge} from 'react-bootstrap';\r\nimport axios from 'axios';\r\n\r\nimport ImageGallery from '../../components/ImageGallery';\r\nimport {Inputfield, Textarea} from '../../form/Inputfield';\r\nimport {useToasts } from 'react-toast-notifications';\r\nimport Cropper from 'react-cropper';\r\nimport 'cropperjs/dist/cropper.css';\r\nimport {Radio} from 'custom-input-aslam';\r\n\r\n// import {AdminContext} from '../Admin';\r\nimport {AppContext} from '../../App';\r\nimport {getToken} from '../../methods/methods';\r\n\r\nconst Productform =(props)=>{\r\n\tconst {data, dispatch} = useContext(AppContext);\t\r\n\tconst [xfields, setXfields] = useState([])\r\n\tconst [srcDefault, setSrcDefault] = useState('')\r\n\tconst fieldName = useRef()\r\n\tconst fieldValue = useRef()\r\n\tconst { addToast } = useToasts();\r\n\tconst [fileData, setFileData] =\tuseState([]);\r\n\tconst [displayimg, setDisplayimg] =\tuseState(0);\r\n\tconst [imgLoging, setImgLoging] =\tuseState(false);\r\n\tconst cropper = useRef(null);\r\n\tconst [product, setProduct] =\tuseState(props.data)\r\n\t\r\n\tlet errorSetting = { appearance: 'error', autoDismiss:true,  autoDismissTimeout :2000 }\r\n\r\n\r\n\tuseEffect(()=>{\r\n\t\tlet photo = JSON.stringify({display:displayimg, photosurl:fileData })\t\t\t\t\r\n\t\tif(product && fileData.length>0){\r\n\t\t\tsetProduct({...product, photos:photo, thumbnail:fileData[0].url})\t\t\t\r\n\t\t} \r\n\t}, [fileData, displayimg])\r\n\r\n\tuseEffect(()=>{\r\n\t\tlet fieldsData = JSON.stringify(xfields);\r\n\t\tif(xfields.length>0) setProduct({...product, extra_fields:fieldsData})\r\n\t},[xfields])\r\n\t\r\n\tconst addField = ()=>{\r\n\t\tlet name  = fieldName.current.value;\r\n\t\tlet value  = fieldValue.current.value;\r\n\t\tif(name && value){\r\n\t\t\tsetXfields([...xfields, {name, value}])\r\n\t\t\tfieldName.current.value= '';\r\n\t\t\tfieldValue.current.value='';\t\t\t\r\n\t\t}\r\n\t}\t\r\n\r\n\tuseEffect(()=>{\t\t\t\t\r\n\t\t if(props.data && props.data.photos){\r\n\t\t\tlet photos = JSON.parse(props.data.photos)\r\n\t\t\t\tsetFileData(photos.photosurl)\r\n\t\t\t}\r\n\t},[props.data.photos]);\r\n\t\r\n\tuseEffect(()=>{\r\n\t \tif(props.data && props.data.extra_fields){\r\n\t\tlet extra_fields = JSON.parse(props.data.extra_fields)\t\t\t\t\r\n\t\t\tsetXfields(extra_fields)\r\n\t\t}\r\n\t},[props.data.extra_fields]);\r\n\r\n\tfunction productValidation(){\r\n\t\tif(!product.categories){\r\n\t\t\taddToast('Please select catagory', errorSetting)\r\n\t\t\treturn false\r\n\t\t}\r\n\t\telse if(!product.type){\r\n\t\t\taddToast('Please select type', errorSetting)\r\n\t\t\treturn false\r\n\t\t}\r\n\t\telse if(!product.product_name){\r\n\t\t\taddToast('Please enter product name', errorSetting)\r\n\t\t\treturn false\r\n\t\t}\r\n\t\telse if(!product.selling_price){\r\n\t\t\taddToast('Please enter selling price', errorSetting)\r\n\t\t\treturn false\r\n\t\t}\r\n\t\telse if(!product.selling_price){\r\n\t\t\taddToast('Please enter selling price', errorSetting)\r\n\t\t\treturn false\r\n\t\t}\r\n\t\telse if(!product.venders_price){\r\n\t\t\taddToast('Please enter venders price', errorSetting)\r\n\t\t\treturn false\r\n\t\t}\r\n\t\telse if(!product.stock){\r\n\t\t\taddToast('Please enter stock', errorSetting)\r\n\t\t\treturn false\r\n\t\t}\r\n\t\telse if(!product.warranty){\r\n\t\t\taddToast('Please enter warranty', errorSetting)\r\n\t\t\treturn false\r\n\t\t}\r\n\t\telse if(!product.details){\r\n\t\t\taddToast('Please enter details', errorSetting)\r\n\t\t\treturn false\r\n\t\t}\r\n\t\telse if(!product.terms_conditions){\r\n\t\t\taddToast('Please enter details', errorSetting)\r\n\t\t\treturn false\r\n\t\t}\r\n\t\telse if(product.photos.length<=2){\r\n\t\t\taddToast('Please select photos', errorSetting)\r\n\t\t\treturn false\r\n\t\t}\r\n\t\telse{\r\n\t\t\treturn true\r\n\t\t}\r\n\t}\r\n\tasync function cropImg(e){\r\n\t\tif(e!==false && cropper){\r\n\t\t\tsetImgLoging(true)\r\n\t    const dataUrl = await cropper.current.getCroppedCanvas().toDataURL(\"image/jpeg\");\t    \r\n\t   \tuploadOnServer(dataUrl)\t   \t\r\n\t\t}\r\n  }\r\n\r\n  function uploadOnServer(url){\r\n\t\taxios.post(`${data.API_URL}/upload`, {image:url}).then((res)=>{\t\r\n\t\tconsole.log(res.data)\t\t\r\n   \t\tif(res.data.status===false){\r\n   \t\t\taddToast(res.data.message, errorSetting)\r\n   \t\t}\r\n   \t\telse{\r\n  \t\t\tsetFileData([...fileData, res.data])\t\r\n   \t\t}\r\n  \t\tsetImgLoging(false)\r\n  \t})\r\n  }\r\n\r\n  function removeImage(i){\r\n  \tlet newfileData = fileData;\r\n  \tnewfileData.splice(i, 1);  \t\r\n  \tsetFileData([...newfileData])\r\n  }\r\n  function setDisplay(i){\r\n  \tsetProduct({...product, thumbnail:fileData[i].url})\r\n  }  \r\n\tconst uploadFiles=(e)=>{\r\n\t\tlet image = window.URL.createObjectURL(e.target.files[0])\r\n\t\tsetSrcDefault(image);     \r\n\t}\r\n\tconst saveProduct=()=>{\r\n\t\tlet validate = productValidation();\r\n\t\tif(validate){\r\n\t\t\taxios.post(`${data.API_URL}/product/add`, product, getToken() ).then((res)=>{\r\n\t\t\t\tif(res.data.status===false){\r\n\t\t\t\t\taddToast(res.data.message, errorSetting)\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tgetProducts()\r\n\t\t\t\t\taddToast(`Product added successfully`, { appearance: 'success', autoDismiss:true,  autoDismissTimeout :2000 })\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t})\t\t\t\r\n\t\t}\r\n\t}\r\n\tconst updateProduct=()=>{\r\n\t\tlet validate = productValidation();\r\n\t\tif(validate){\r\n\t\t\taxios.put(`${data.API_URL}/product`, product, getToken() ).then((res)=>{\r\n\t\t\t\tconsole.log(res.data)\r\n\t\t\t\tif(res.data.status===false){\r\n\t\t\t\t\taddToast(res.data.message, errorSetting)\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tgetProducts()\r\n\t\t\t\t\taddToast(`Product 'updated' successfully`, { appearance: 'success', autoDismiss:true,  autoDismissTimeout :2000 })\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t})\t\t\t\r\n\t\t}\r\n\t}\r\n\tconst getProducts =()=>{\r\n\t\taxios.get(`${data.API_URL}/product/admin/products`, getToken() ).then((res)=>{\t\t\t\r\n\t\t\tif(res.data.status!==false) dispatch({type:'FETCH_PRODUCTS', payload:res.data})\r\n\t\t})\r\n\t}\r\n\tconst inputChange = (e)=>{\r\n\t\tlet name = e.target.name;\r\n\t\tlet value = e.target.value;\t\t\r\n\t\tsetProduct({\r\n\t\t\t...product,\r\n\t\t\t[name]:value\r\n\t\t})\r\n\t}\t\r\n\tfunction cancelCroper(){\r\n\t\tsetSrcDefault(false)\r\n\t\taxios.get(`${data.API_URL}/product/admin/products`, getToken() ).then((res)=>{\t\t\t\r\n\t\t\tif(res.data.status!==false) dispatch({type:'FETCH_PRODUCTS', payload:res.data})\r\n\t\t})\r\n\t}\r\n\tfunction selectedImages(images){\r\n\t\tsetFileData([...fileData, ...images])\t\r\n\t}\r\n\treturn(\r\n\t\t<div className=\"p-3 mb-3 border-bottom\">\r\n\t\t\t<Form>\r\n\t\t\t  <Form.Row>\r\n\t\t\t\t  <div className=\"form-group col-lg-3 col-12\">\t\t\r\n\t\t\t\t  \t<Form.Control as=\"select\" name=\"categories\" onChange={e=>inputChange(e)}>\r\n\t\t\t\t      <option>Choose Categories</option>\r\n\t\t\t\t      <option value=\"industrial\">Industrial</option>\r\n\t\t\t\t      <option value=\"construction\">Construction</option>\r\n\t\t\t\t      <option value=\"agriculture\">Agriculture</option>\r\n\t\t\t\t      <option value=\"housewares\">Housewares</option>\t\t\t      \r\n\t\t\t\t    </Form.Control>\r\n\t\t\t\t  </div>\r\n\t\t\t\t  <div className=\"form-group col-lg-3 col-12\">\r\n\t\t\t\t    <Form.Control as=\"select\" name=\"type\" onChange={e=>inputChange(e)}>\r\n\t\t\t\t      <option>Choose Type</option>\r\n\t\t\t\t      <option value=\"Hand Tools\">Hand Tools</option>\r\n\t\t\t\t      <option value=\"Automobile\">Automobile</option>\r\n\t\t\t\t      <option value=\"Furniture\">Furniture</option>\t\t\t      \t\t\t      \r\n\t\t\t\t      <option value=\"electrical\">Electrical</option>\t\t\t      \t\t\t      \r\n\t\t\t\t    </Form.Control>\t\t  \t\r\n\t\t\t\t  </div>\t\t\t  \t\r\n\t\t\t    <Inputfield col={3} \r\n\t\t\t    \t\t\t\t\t\tname=\"product_name\" \r\n\t\t\t    \t\t\t\t\t\tplaceholder=\"Product Name\" \r\n\t\t\t    \t\t\t\t\t\ttype=\"text\"\r\n\t\t\t    \t\t\t\t\t\tdefaultValue={product.product_name}\r\n\t\t\t    \t\t\t\t\t\tonChange={e=>inputChange(e)}\r\n\t\t\t    \t\t\t\t\t\t/>\t\t    \r\n\t\t\t  \t<Inputfield col={3}\r\n\t\t\t  \t\t\t\t\t\t\tname=\"purchase_price\" \r\n\t\t\t  \t\t\t\t\t\t\tplaceholder=\"Purchase Price\" \r\n\t\t\t  \t\t\t\t\t\t\ttype=\"number\"  \r\n\t\t\t  \t\t\t\t\t\t\tdefaultValue={product.purchase_price}\r\n\t\t\t  \t\t\t\t\t\t\tonChange={e=>inputChange(e)}\r\n\t\t\t  \t\t\t\t\t\t\t/>\r\n\t\t\t  \t<Inputfield col={3} \r\n\t\t\t  \t\t\t\t\t\t\tname=\"selling_price\" \r\n\t\t\t  \t\t\t\t\t\t\tplaceholder=\"Selling Price\" \r\n\t\t\t  \t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t  \t\t\t\t\t\t\tdefaultValue={product.selling_price}\r\n\t\t\t  \t\t\t\t\t\t\tonChange={e=>inputChange(e)}\r\n\t\t\t  \t\t\t\t\t\t\t/>\r\n\t\t\t  \t<Inputfield col={3} \r\n\t\t\t  \t\t\t\t\t\t\tname=\"venders_price\" \r\n\t\t\t  \t\t\t\t\t\t\tplaceholder=\"Venders Price\" \r\n\t\t\t  \t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t  \t\t\t\t\t\t\tdefaultValue={product.venders_price}\r\n\t\t\t  \t\t\t\t\t\t\tonChange={e=>inputChange(e)}\r\n\t\t\t  \t\t\t\t\t\t\t/>\r\n\t\t\t  \t<Inputfield col={2} \r\n\t\t\t  \t\t\t\t\t\t\tname=\"stock\" \r\n\t\t\t  \t\t\t\t\t\t\tplaceholder=\"Stock\" \r\n\t\t\t  \t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t  \t\t\t\t\t\t\tdefaultValue={product.stock}\r\n\t\t\t  \t\t\t\t\t\t\tonChange={e=>inputChange(e)}\r\n\t\t\t  \t\t\t\t\t\t\t/>\r\n\t\t\t  \t<Inputfield col={2} \r\n\t\t\t  \t\t\t\t\t\t\tname=\"minorder\"\r\n\t\t\t  \t\t\t\t\t\t\tplaceholder=\"Min Order\" \r\n\t\t\t  \t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t  \t\t\t\t\t\t\tdefaultValue={product.minorder}\r\n\t\t\t  \t\t\t\t\t\t\tonChange={e=>inputChange(e)}\r\n\t\t\t  \t\t\t\t\t\t\t/>\r\n\t\t\t  \t<Inputfield col={2} \r\n\t\t\t  \t\t\t\t\t\t\tname=\"warranty\" \r\n\t\t\t  \t\t\t\t\t\t\tplaceholder=\"Warranty in Months\" \r\n\t\t\t  \t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t  \t\t\t\t\t\t\tdefaultValue={product.warranty}\r\n\t\t\t  \t\t\t\t\t\t\tonChange={e=>inputChange(e)}\r\n\t\t\t  \t\t\t\t\t\t\t/>\t\t\t\r\n\t\t\t\t</Form.Row>\r\n\t\t\t\t<Form.Row>\r\n\t\t\t\t\t<div className=\"ml-1\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\txfields? xfields.map((item, i)=>{\r\n\t\t\t\t\t\t\t\treturn(\r\n\t\t\t\t\t\t\t\t\t\t<Badge className=\"bg_yellow white ml-1\" key={item.name+i}> {`${item.name} : ${item.value}` }</Badge>\r\n\t\t\t\t\t\t\t\t\t) \r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t:null\r\n\t\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"col-12 col-lg-4\">\r\n\t\t\t\t\t\t<InputGroup className=\"mb-3\" size=\"sm\">\r\n\t\t\t\t\t\t  <FormControl placeholder=\"Title\" ref={fieldName} />\r\n\t\t\t\t\t\t  <FormControl placeholder=\"Value\" ref={fieldValue} />\r\n\t\t\t\t\t\t  <InputGroup.Prepend>\r\n\t\t\t\t\t\t    <Button size=\"sm\" variant=\"\" className=\"btn_green\" type=\"button\" onClick={e=>addField(e)}>\r\n\t\t\t\t\t\t    \t<i className=\"fal fa-plus\"></i> Add More\r\n\t\t\t\t\t\t    </Button>\r\n\t\t\t\t\t\t  </InputGroup.Prepend>\r\n\t\t\t\t\t\t</InputGroup>\t\t\t\t\t\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Form.Row>\r\n\t\t\t  <Form.Row>\r\n\t\t\t  \t<Textarea col={6} \r\n\t\t\t  \t\t\t\t\t\tname=\"details\" \r\n\t\t\t  \t\t\t\t\t\tplaceholder=\"Details\" \r\n\t\t\t  \t\t\t\t\t\tvalue={product.details}\r\n\t\t\t  \t\t\t\t\t\tonChange={e=>inputChange(e)}\r\n\t\t\t  \t\t\t\t\t\t/>\r\n\t\t\t  \t<Textarea col={6} \r\n\t\t\t  \t\t\t\t\t\tname=\"terms_conditions\" \r\n\t\t\t  \t\t\t\t\t\tplaceholder=\"Terms and Conditions\" \r\n\t\t\t  \t\t\t\t\t\tvalue={product.terms_conditions}\r\n\t\t\t  \t\t\t\t\t\tonChange={e=>inputChange(e)}\r\n\t\t\t  \t\t\t\t\t\t/>\r\n\t\t\t\t</Form.Row>\r\n\t\t\t\t<Form.Row>\r\n\t\t\t\t  <div className='col-lg-6'>\r\n\t\t\t\t  \t<div className=\"custom-file\">\r\n\t\t\t\t\t    <input type=\"file\" className=\"custom-file-input\" onChange={e=>uploadFiles(e)} />\r\n\t\t\t\t\t    <label className=\"custom-file-label\" htmlFor=\"customFile\">Choose file</label>\r\n\t\t\t\t\t  </div>\r\n\t\t\t\t\t  {\r\n\t\t\t\t\t  \tsrcDefault? \r\n\t\t\t\t\t\t\t  <div className=\"mt-2 mb-2\">\r\n\t\t\t\t\t\t\t\t\t<Cropper\r\n\t\t\t\t\t\t        ref={cropper}\r\n\t\t\t\t\t\t        src={srcDefault}\r\n\t\t\t\t\t\t        style={{maxHeight: 400, maxWidth: 600, width:'100%'}}\r\n\t\t\t\t\t\t        // Cropper.js options\r\n\t\t\t\t\t\t        aspectRatio={1 / 1}\r\n\t\t\t\t\t\t        guides={false}\r\n\t\t\t\t\t\t        // crop={e=>cropImg(e)} \r\n\t\t\t\t\t\t      />\r\n\t\t\t\t\t      </div>\r\n\t\t\t\t\t  \t:null\r\n\t\t\t\t\t  }\r\n\t\t\t      {\r\n\t\t\t      \tsrcDefault? \r\n\t\t\t      \t\t<div>\r\n\t\t\t\t\t\t      <button type=\"button\" className=\"btn btn_orange\" onClick={e=>cancelCroper(false)} >Cancel</button>\r\n\t\t\t\t\t\t      <button type=\"button\" className=\"btn btn_blue ml-2\" onClick={e=>cropImg(e)} disabled={imgLoging? true : false} >\r\n\t\t\t\t\t\t      \t{\r\n\t\t\t\t\t\t      \t\timgLoging? \r\n\t\t\t\t\t\t      \t\t\t<span>\r\n\t\t\t\t\t\t\t      \t\t\t<span className=\"spinner-grow spinner-grow-sm\"></span>Uploading..\r\n\t    \t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t      \t\t: <span>Crop & Upload</span>\r\n\t\t\t\t\t\t      \t}\t\t\t\t\t\t      \t\r\n\t\t\t\t\t\t      </button>\t\t\t      \t\t\t\t\t\t\t\t\t      \r\n\t\t\t      \t\t</div>\r\n\t\t\t      \t:null\r\n\t\t\t      }\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"col-lg-6\">\r\n\t\t\t\t\t\t{\t\r\n\t\t\t\t\t\t\tproduct.thumbnail? \r\n\t\t\t\t\t\t\t\t<div className=\"mb-2 d-flex flex-column\">\r\n\t\t\t\t\t\t\t\t\t<Image src={product.thumbnail} \r\n\t\t\t\t\t\t\t\t\t\t\t\t style={{border:`2px solid green`}} \r\n\t\t\t\t\t\t\t\t\t\t\t\t className=\"img-fluid\" width=\"100\" />\r\n\t\t\t\t\t\t\t\t\t<small>Product Thumbnail</small>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t:null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t{fileData && fileData.length>0? fileData.map((item, i)=>{\r\n\t\t\t\t\t\t    return (\r\n\t\t\t\t\t\t\t    \t<Col xs={6} md={2} key={item.id}>\r\n\t\t\t\t\t\t\t\t    \t<div style={{border:`2px solid #dee2e6`}} >\r\n\t\t\t\t\t\t\t\t    \t\t<div className=\"p-1 d-flex justify-content-between\">\r\n\t\t\t\t\t\t\t\t\t    \t\t<Radio name=\"thumb\" size={0.8} onClick={e=>setDisplay(i)}/>\r\n\t\t\t\t\t\t\t\t\t    \t\t<i className=\"fal fa-times\" onClick={e=>removeImage(i)}></i> \r\n\t\t\t\t\t\t\t\t    \t\t</div>\r\n\t\t\t\t\t\t\t\t\t      <Image src={`${item.url}`} className=\"img-fluid\" />\r\n\t\t\t\t\t\t\t\t    \t</div>\r\n\t\t\t\t\t\t\t\t    </Col>\t\r\n\t\t\t\t\t\t\t    )\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}) :null}\r\n\t\t\t\t\t  </Row>\r\n\t\t\t\t\t</div>\t\r\n\t\t\t\t\t<div className=\"col\">\r\n\t\t\t\t\t\t<ImageGallery selected={selectedImages}/>\r\n\t\t\t\t\t</div>\t\t\t\t\r\n\t\t\t  </Form.Row>\r\n\t\t\t  <div className=\"d-flex justify-content-end\">\r\n\t\t\t  \t{\r\n\t\t\t  \t\tprops.create? \r\n\t\t\t\t  \t\t<button className=\"btn btn-sm btn_blue\" onClick={e=>saveProduct(e)}  type=\"button\">Save Product</button>\t\t\t\t  \r\n\r\n\t\t\t  \t\t: <button className=\"btn btn-sm btn_blue\" onClick={e=>updateProduct(e)}  type=\"button\">Update Product</button>\r\n\t\t\t  \t}\t\t\t\t  \r\n\t\t\t  </div>\r\n\t\t\t</Form>\r\n\t\t</div>\r\n\t\t)\r\n}\r\n\r\nexport default memo(Productform);"],"sourceRoot":""}