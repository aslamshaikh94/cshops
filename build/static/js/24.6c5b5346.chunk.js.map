{"version":3,"sources":["form/Inputfield.js","components/ImageGallery.js","admin/components/Productform.js"],"names":["Inputfield","props","col","formgroup","all","className","Textarea","ImageGallery","data","useContext","AppContext","useState","show","setShow","gallery","setGallery","images","setImages","useEffect","axios","get","API_URL","then","res","Fragment","Button","onClick","Modal","backdrop","scrollable","onHide","size","aria-labelledby","Header","closeButton","Title","id","Body","map","item","active","some","e","public_id","style","width","key","find","Promise","resolve","reject","url","imgItem","Image","src","height","thumbnail","Footer","variant","selected","memo","AdminContext","dispatch","xfields","setXfields","srcDefault","setSrcDefault","fieldName","useRef","fieldValue","addToast","useToasts","fileData","setFileData","displayimg","imgLoging","setImgLoging","cropper","product","setProduct","errorSetting","appearance","autoDismiss","autoDismissTimeout","photo","JSON","stringify","display","photosurl","length","photos","fieldsData","extra_fields","productValidation","categories","type","product_name","selling_price","venders_price","stock","warranty","details","terms_conditions","a","current","getCroppedCanvas","toDataURL","uploadOnServer","post","image","status","message","parse","getProducts","getToken","payload","inputChange","name","target","value","Form","Row","Control","as","onChange","placeholder","defaultValue","purchase_price","minorder","i","Badge","InputGroup","FormControl","ref","Prepend","addField","window","URL","createObjectURL","files","uploadFiles","htmlFor","maxHeight","maxWidth","aspectRatio","guides","cropImg","disabled","border","Col","xs","md","setDisplay","newfileData","splice","removeImage","create","put","console","log"],"mappings":"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","file":"static/js/24.6c5b5346.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Inputfield = (props)=>{\r\n\tconst {col, formgroup, ...all} = props;\r\n\treturn(\r\n\t\t\t<div className={`form-group ${formgroup} ${col? 'col-lg-' +col+ ' col-12' :''}`}>\r\n\t\t\t\t<input {...all}\r\n\t\t\t\t\t\t\t className=\"form-control\" />\r\n\t\t\t</div>\r\n\t\t)\r\n}\r\n\r\nconst Textarea = (props)=>{\r\n\tconst {col, ...all} = props;\r\n\treturn(\r\n\t\t\t<div className={`form-group col-lg-${col} col-12`}>\r\n\t\t\t\t<textarea {...all}\r\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"></textarea>\r\n\t\t\t</div>\r\n\t\t)\r\n}\r\n\r\n\r\nexport  {Inputfield, Textarea}","import React, {useState, useEffect, useContext} from 'react';\r\nimport {Modal, Button, Image} from 'react-bootstrap';\r\nimport axios from 'axios';\r\n\r\nimport {AppContext} from '../App';\r\n\r\nfunction ImageGallery(props) {\r\n  const {data} = useContext(AppContext);  \r\n  const [show, setShow] = useState(false);\r\n  const [gallery, setGallery] = useState(false);\r\n  const [images, setImages] = useState([]);\r\n\r\n  useEffect(()=>{\r\n    axios.get(`${data.API_URL}/upload`).then((res)=>{\r\n      setGallery(res.data)\r\n    })\r\n  },[])\r\n\r\n  function selectImage(id){\r\n    let findImage = gallery.find((item)=>{\r\n        new Promise((resolve, reject)=>{\r\n          if(item.public_id===id){          \r\n            let  photo ={\r\n              url:item.url,\r\n              id:item.public_id\r\n            }\r\n            resolve(photo)                      \r\n          }\r\n        }).then((imgItem)=>{setImages([...images, imgItem])})\r\n    })\r\n    \r\n  }\r\n  \r\n  function selectClose(){\r\n    props.selected(images)\r\n    setShow(false)\r\n  }\r\n  \r\n  return (\r\n    <React.Fragment>\r\n      <Button className=\"bg_green mt-2\" onClick={() => setShow(true)}>\r\n        Select to Gallery\r\n      </Button>\r\n\r\n      <Modal\r\n        backdrop='static'\r\n        scrollable\r\n        show={show}\r\n        onHide={() => setShow(false)}\r\n        size=\"xl\"\r\n        aria-labelledby=\"example-custom-modal-styling-title\"\r\n      >\r\n        <Modal.Header closeButton>\r\n          <Modal.Title id=\"example-custom-modal-styling-title\">\r\n           Image Gallery\r\n          </Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <div className=\"d-flex flex-wrap\">\r\n            {\r\n            gallery?  gallery.map((item)=>{\r\n                let active = images.some(e=> e.id===item.public_id)                \r\n                return (\r\n                  <div style={{width:'10%'}}  key={item.public_id} onClick={e=>selectImage(item.public_id)}>\r\n                    <Image src={item.url} \r\n                           style={{height:'120px', width:'120px'}} \r\n                           className={active? \"border border-success\" :null}\r\n                           thumbnail />\r\n                  </div>\r\n                  )\r\n              })\r\n            :null\r\n            }\r\n          </div>\r\n        </Modal.Body>\r\n        <Modal.Footer>          \r\n          <Button variant=\"primary\" onClick={selectClose}>\r\n            Select & Close\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default ImageGallery","import React, {useState, useEffect, memo, useContext, useRef} from 'react';\r\nimport {Button, Form, Col, Image, Row, InputGroup, FormControl, Badge} from 'react-bootstrap';\r\nimport axios from 'axios';\r\n\r\nimport ImageGallery from '../../components/ImageGallery';\r\nimport {Inputfield, Textarea} from '../../form/Inputfield';\r\nimport {useToasts } from 'react-toast-notifications';\r\nimport Cropper from 'react-cropper';\r\nimport 'cropperjs/dist/cropper.css';\r\nimport {Radio} from 'custom-input-aslam';\r\n\r\nimport {AdminContext} from '../Admin';\r\nimport {getToken} from '../../methods/methods';\r\n\r\nconst Productform =(props)=>{\r\n\tconst {data, dispatch} = useContext(AdminContext);\t\r\n\tconst [xfields, setXfields] = useState([])\r\n\tconst [srcDefault, setSrcDefault] = useState('')\r\n\tconst fieldName = useRef()\r\n\tconst fieldValue = useRef()\r\n\tconst { addToast } = useToasts();\r\n\tconst [fileData, setFileData] =\tuseState([]);\r\n\tconst [displayimg, setDisplayimg] =\tuseState(0);\r\n\tconst [imgLoging, setImgLoging] =\tuseState(false);\r\n\tconst cropper = useRef(null);\r\n\tconst [product, setProduct] =\tuseState(props.data)\r\n\t\r\n\tlet errorSetting = { appearance: 'error', autoDismiss:true,  autoDismissTimeout :2000 }\r\n\r\n\r\n\tuseEffect(()=>{\r\n\t\tlet photo = JSON.stringify({display:displayimg, photosurl:fileData })\t\t\t\t\r\n\t\tif(product && fileData.length>0){\r\n\t\t\tsetProduct({...product, photos:photo, thumbnail:fileData[0].url})\t\t\t\r\n\t\t} \r\n\t}, [fileData, displayimg])\r\n\r\n\tuseEffect(()=>{\r\n\t\tlet fieldsData = JSON.stringify(xfields);\r\n\t\tif(xfields.length>0) setProduct({...product, extra_fields:fieldsData})\r\n\t},[xfields])\r\n\t\r\n\tconst addField = ()=>{\r\n\t\tlet name  = fieldName.current.value;\r\n\t\tlet value  = fieldValue.current.value;\r\n\t\tif(name && value){\r\n\t\t\tsetXfields([...xfields, {name, value}])\r\n\t\t\tfieldName.current.value= '';\r\n\t\t\tfieldValue.current.value='';\t\t\t\r\n\t\t}\r\n\t}\t\r\n\r\n\tuseEffect(()=>{\t\t\t\t\r\n\t\t if(props.data && props.data.photos){\r\n\t\t\tlet photos = JSON.parse(props.data.photos)\r\n\t\t\t\tsetFileData(photos.photosurl)\r\n\t\t\t}\r\n\t},[props.data.photos]);\r\n\t\r\n\tuseEffect(()=>{\r\n\t \tif(props.data && props.data.extra_fields){\r\n\t\tlet extra_fields = JSON.parse(props.data.extra_fields)\t\t\t\t\r\n\t\t\tsetXfields(extra_fields)\r\n\t\t}\r\n\t},[props.data.extra_fields]);\r\n\r\n\tfunction productValidation(){\r\n\t\tif(!product.categories){\r\n\t\t\taddToast('Please select catagory', errorSetting)\r\n\t\t\treturn false\r\n\t\t}\r\n\t\telse if(!product.type){\r\n\t\t\taddToast('Please select type', errorSetting)\r\n\t\t\treturn false\r\n\t\t}\r\n\t\telse if(!product.product_name){\r\n\t\t\taddToast('Please enter product name', errorSetting)\r\n\t\t\treturn false\r\n\t\t}\r\n\t\telse if(!product.selling_price){\r\n\t\t\taddToast('Please enter selling price', errorSetting)\r\n\t\t\treturn false\r\n\t\t}\r\n\t\telse if(!product.selling_price){\r\n\t\t\taddToast('Please enter selling price', errorSetting)\r\n\t\t\treturn false\r\n\t\t}\r\n\t\telse if(!product.venders_price){\r\n\t\t\taddToast('Please enter venders price', errorSetting)\r\n\t\t\treturn false\r\n\t\t}\r\n\t\telse if(!product.stock){\r\n\t\t\taddToast('Please enter stock', errorSetting)\r\n\t\t\treturn false\r\n\t\t}\r\n\t\telse if(!product.warranty){\r\n\t\t\taddToast('Please enter warranty', errorSetting)\r\n\t\t\treturn false\r\n\t\t}\r\n\t\telse if(!product.details){\r\n\t\t\taddToast('Please enter details', errorSetting)\r\n\t\t\treturn false\r\n\t\t}\r\n\t\telse if(!product.terms_conditions){\r\n\t\t\taddToast('Please enter details', errorSetting)\r\n\t\t\treturn false\r\n\t\t}\r\n\t\telse if(product.photos.length<=2){\r\n\t\t\taddToast('Please select photos', errorSetting)\r\n\t\t\treturn false\r\n\t\t}\r\n\t\telse{\r\n\t\t\treturn true\r\n\t\t}\r\n\t}\r\n\tasync function cropImg(e){\r\n\t\tif(e!==false && cropper){\r\n\t\t\tsetImgLoging(true)\r\n\t    const dataUrl = await cropper.current.getCroppedCanvas().toDataURL(\"image/jpeg\");\t    \r\n\t   \tuploadOnServer(dataUrl)\t   \t\r\n\t\t}\r\n  }\r\n\r\n  function uploadOnServer(url){\r\n\t\taxios.post(`${data.API_URL}/upload`, {image:url}).then((res)=>{\t\t\t\r\n   \t\tif(res.data.status===false){\r\n   \t\t\taddToast(res.data.message, errorSetting)\r\n   \t\t}\r\n   \t\telse{\r\n  \t\t\tsetFileData([...fileData, res.data])\t\r\n   \t\t}\r\n  \t\tsetImgLoging(false)\r\n  \t})\r\n  }\r\n\r\n  function removeImage(i){\r\n  \tlet newfileData = fileData;\r\n  \tnewfileData.splice(i, 1);  \t\r\n  \tsetFileData([...newfileData])\r\n  }\r\n  function setDisplay(i){\r\n  \tsetProduct({...product, thumbnail:fileData[i].url})\r\n  }  \r\n\tconst uploadFiles=(e)=>{\r\n\t\tlet image = window.URL.createObjectURL(e.target.files[0])\r\n\t\tsetSrcDefault(image);     \r\n\t}\r\n\tconst saveProduct=()=>{\r\n\t\tlet validate = productValidation();\r\n\t\tif(validate){\r\n\t\t\taxios.post(`${data.API_URL}/product/add`, product, getToken() ).then((res)=>{\r\n\t\t\t\tif(res.data.status===false){\r\n\t\t\t\t\taddToast(res.data.message, errorSetting)\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tgetProducts()\r\n\t\t\t\t\taddToast(`Product added successfully`, { appearance: 'success', autoDismiss:true,  autoDismissTimeout :2000 })\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t})\t\t\t\r\n\t\t}\r\n\t}\r\n\tconst updateProduct=()=>{\r\n\t\tlet validate = productValidation();\r\n\t\tif(validate){\r\n\t\t\taxios.put(`${data.API_URL}/product`, product, getToken() ).then((res)=>{\r\n\t\t\t\tconsole.log(res.data)\r\n\t\t\t\tif(res.data.status===false){\r\n\t\t\t\t\taddToast(res.data.message, errorSetting)\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tgetProducts()\r\n\t\t\t\t\taddToast(`Product 'updated' successfully`, { appearance: 'success', autoDismiss:true,  autoDismissTimeout :2000 })\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t})\t\t\t\r\n\t\t}\r\n\t}\r\n\tconst getProducts =()=>{\r\n\t\taxios.get(`${data.API_URL}/product/admin/products`, getToken() ).then((res)=>{\t\t\t\r\n\t\t\tdispatch({type:'FETCH_PRODUCTS', payload:res.data})\r\n\t\t})\r\n\t}\r\n\tconst inputChange = (e)=>{\r\n\t\tlet name = e.target.name;\r\n\t\tlet value = e.target.value;\t\t\r\n\t\tsetProduct({\r\n\t\t\t...product,\r\n\t\t\t[name]:value\r\n\t\t})\r\n\t}\t\r\n\tfunction cancelCroper(){\r\n\t\tsetSrcDefault(false)\r\n\t\taxios.get(`${data.API_URL}/product/admin/products`, getToken() ).then((res)=>{\t\t\t\r\n\t\t\tdispatch({type:'FETCH_PRODUCTS', payload:res.data})\r\n\t\t})\r\n\t}\r\n\tfunction selectedImages(images){\r\n\t\tsetFileData([...fileData, ...images])\t\r\n\t}\r\n\treturn(\r\n\t\t<div className=\"p-3 mb-3 border-bottom\">\r\n\t\t\t<Form>\r\n\t\t\t  <Form.Row>\r\n\t\t\t\t  <div className=\"form-group col-lg-3 col-12\">\t\t\r\n\t\t\t\t  \t<Form.Control as=\"select\" name=\"categories\" onChange={e=>inputChange(e)}>\r\n\t\t\t\t      <option>Choose Categories</option>\r\n\t\t\t\t      <option value=\"industrial\">Industrial</option>\r\n\t\t\t\t      <option value=\"construction\">Construction</option>\r\n\t\t\t\t      <option value=\"agriculture\">Agriculture</option>\r\n\t\t\t\t      <option value=\"housewares\">Housewares</option>\t\t\t      \r\n\t\t\t\t    </Form.Control>\r\n\t\t\t\t  </div>\r\n\t\t\t\t  <div className=\"form-group col-lg-3 col-12\">\r\n\t\t\t\t    <Form.Control as=\"select\" name=\"type\" onChange={e=>inputChange(e)}>\r\n\t\t\t\t      <option>Choose Type</option>\r\n\t\t\t\t      <option value=\"Hand Tools\">Hand Tools</option>\r\n\t\t\t\t      <option value=\"Automobile\">Automobile</option>\r\n\t\t\t\t      <option value=\"Furniture\">Furniture</option>\t\t\t      \t\t\t      \r\n\t\t\t\t      <option value=\"electrical\">Electrical</option>\t\t\t      \t\t\t      \r\n\t\t\t\t    </Form.Control>\t\t  \t\r\n\t\t\t\t  </div>\t\t\t  \t\r\n\t\t\t    <Inputfield col={3} \r\n\t\t\t    \t\t\t\t\t\tname=\"product_name\" \r\n\t\t\t    \t\t\t\t\t\tplaceholder=\"Product Name\" \r\n\t\t\t    \t\t\t\t\t\ttype=\"text\"\r\n\t\t\t    \t\t\t\t\t\tdefaultValue={product.product_name}\r\n\t\t\t    \t\t\t\t\t\tonChange={e=>inputChange(e)}\r\n\t\t\t    \t\t\t\t\t\t/>\t\t    \r\n\t\t\t  \t<Inputfield col={3}\r\n\t\t\t  \t\t\t\t\t\t\tname=\"purchase_price\" \r\n\t\t\t  \t\t\t\t\t\t\tplaceholder=\"Purchase Price\" \r\n\t\t\t  \t\t\t\t\t\t\ttype=\"number\"  \r\n\t\t\t  \t\t\t\t\t\t\tdefaultValue={product.purchase_price}\r\n\t\t\t  \t\t\t\t\t\t\tonChange={e=>inputChange(e)}\r\n\t\t\t  \t\t\t\t\t\t\t/>\r\n\t\t\t  \t<Inputfield col={3} \r\n\t\t\t  \t\t\t\t\t\t\tname=\"selling_price\" \r\n\t\t\t  \t\t\t\t\t\t\tplaceholder=\"Selling Price\" \r\n\t\t\t  \t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t  \t\t\t\t\t\t\tdefaultValue={product.selling_price}\r\n\t\t\t  \t\t\t\t\t\t\tonChange={e=>inputChange(e)}\r\n\t\t\t  \t\t\t\t\t\t\t/>\r\n\t\t\t  \t<Inputfield col={3} \r\n\t\t\t  \t\t\t\t\t\t\tname=\"venders_price\" \r\n\t\t\t  \t\t\t\t\t\t\tplaceholder=\"Venders Price\" \r\n\t\t\t  \t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t  \t\t\t\t\t\t\tdefaultValue={product.venders_price}\r\n\t\t\t  \t\t\t\t\t\t\tonChange={e=>inputChange(e)}\r\n\t\t\t  \t\t\t\t\t\t\t/>\r\n\t\t\t  \t<Inputfield col={2} \r\n\t\t\t  \t\t\t\t\t\t\tname=\"stock\" \r\n\t\t\t  \t\t\t\t\t\t\tplaceholder=\"Stock\" \r\n\t\t\t  \t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t  \t\t\t\t\t\t\tdefaultValue={product.stock}\r\n\t\t\t  \t\t\t\t\t\t\tonChange={e=>inputChange(e)}\r\n\t\t\t  \t\t\t\t\t\t\t/>\r\n\t\t\t  \t<Inputfield col={2} \r\n\t\t\t  \t\t\t\t\t\t\tname=\"minorder\"\r\n\t\t\t  \t\t\t\t\t\t\tplaceholder=\"Min Order\" \r\n\t\t\t  \t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t  \t\t\t\t\t\t\tdefaultValue={product.minorder}\r\n\t\t\t  \t\t\t\t\t\t\tonChange={e=>inputChange(e)}\r\n\t\t\t  \t\t\t\t\t\t\t/>\r\n\t\t\t  \t<Inputfield col={2} \r\n\t\t\t  \t\t\t\t\t\t\tname=\"warranty\" \r\n\t\t\t  \t\t\t\t\t\t\tplaceholder=\"Warranty in Months\" \r\n\t\t\t  \t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t  \t\t\t\t\t\t\tdefaultValue={product.warranty}\r\n\t\t\t  \t\t\t\t\t\t\tonChange={e=>inputChange(e)}\r\n\t\t\t  \t\t\t\t\t\t\t/>\t\t\t\r\n\t\t\t\t</Form.Row>\r\n\t\t\t\t<Form.Row>\r\n\t\t\t\t\t<div className=\"ml-1\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\txfields? xfields.map((item, i)=>{\r\n\t\t\t\t\t\t\t\treturn(\r\n\t\t\t\t\t\t\t\t\t\t<Badge className=\"bg_yellow white ml-1\" key={item.name+i}> {`${item.name} : ${item.value}` }</Badge>\r\n\t\t\t\t\t\t\t\t\t) \r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t:null\r\n\t\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"col-4\">\r\n\t\t\t\t\t\t<InputGroup className=\"mb-3\" size=\"sm\">\r\n\t\t\t\t\t\t  <FormControl placeholder=\"Label Name\" ref={fieldName} />\r\n\t\t\t\t\t\t  <FormControl placeholder=\"Value\" ref={fieldValue} />\r\n\t\t\t\t\t\t  <InputGroup.Prepend>\r\n\t\t\t\t\t\t    <Button size=\"sm\" variant=\"\" className=\"btn_green\" type=\"button\" onClick={e=>addField(e)}>\r\n\t\t\t\t\t\t    \t<i className=\"fal fa-plus\"></i> Add More\r\n\t\t\t\t\t\t    </Button>\r\n\t\t\t\t\t\t  </InputGroup.Prepend>\r\n\t\t\t\t\t\t</InputGroup>\t\t\t\t\t\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Form.Row>\r\n\t\t\t  <Form.Row>\r\n\t\t\t  \t<Textarea col={6} \r\n\t\t\t  \t\t\t\t\t\tname=\"details\" \r\n\t\t\t  \t\t\t\t\t\tplaceholder=\"Details\" \r\n\t\t\t  \t\t\t\t\t\tvalue={product.details}\r\n\t\t\t  \t\t\t\t\t\tonChange={e=>inputChange(e)}\r\n\t\t\t  \t\t\t\t\t\t/>\r\n\t\t\t  \t<Textarea col={6} \r\n\t\t\t  \t\t\t\t\t\tname=\"terms_conditions\" \r\n\t\t\t  \t\t\t\t\t\tplaceholder=\"Terms and Conditions\" \r\n\t\t\t  \t\t\t\t\t\tvalue={product.terms_conditions}\r\n\t\t\t  \t\t\t\t\t\tonChange={e=>inputChange(e)}\r\n\t\t\t  \t\t\t\t\t\t/>\r\n\t\t\t\t</Form.Row>\r\n\t\t\t\t<Form.Row>\r\n\t\t\t\t  <div className='col-lg-6'>\r\n\t\t\t\t  \t<div className=\"custom-file\">\r\n\t\t\t\t\t    <input type=\"file\" className=\"custom-file-input\" onChange={e=>uploadFiles(e)} />\r\n\t\t\t\t\t    <label className=\"custom-file-label\" htmlFor=\"customFile\">Choose file</label>\r\n\t\t\t\t\t  </div>\r\n\t\t\t\t\t  {\r\n\t\t\t\t\t  \tsrcDefault? \r\n\t\t\t\t\t\t\t  <div className=\"mt-2 mb-2\">\r\n\t\t\t\t\t\t\t\t\t<Cropper\r\n\t\t\t\t\t\t        ref={cropper}\r\n\t\t\t\t\t\t        src={srcDefault}\r\n\t\t\t\t\t\t        style={{maxHeight: 400, maxWidth: 600, width:'100%'}}\r\n\t\t\t\t\t\t        // Cropper.js options\r\n\t\t\t\t\t\t        aspectRatio={1 / 1}\r\n\t\t\t\t\t\t        guides={false}\r\n\t\t\t\t\t\t        // crop={e=>cropImg(e)} \r\n\t\t\t\t\t\t      />\r\n\t\t\t\t\t      </div>\r\n\t\t\t\t\t  \t:null\r\n\t\t\t\t\t  }\r\n\t\t\t      {\r\n\t\t\t      \tsrcDefault? \r\n\t\t\t      \t\t<div>\r\n\t\t\t\t\t\t      <button type=\"button\" className=\"btn btn_orange\" onClick={e=>cancelCroper(false)} >Cancel</button>\r\n\t\t\t\t\t\t      <button type=\"button\" className=\"btn btn_blue ml-2\" onClick={e=>cropImg(e)} disabled={imgLoging? true : false} >\r\n\t\t\t\t\t\t      \t{\r\n\t\t\t\t\t\t      \t\timgLoging? \r\n\t\t\t\t\t\t      \t\t\t<span>\r\n\t\t\t\t\t\t\t      \t\t\t<span className=\"spinner-grow spinner-grow-sm\"></span>Uploading..\r\n\t    \t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t      \t\t: <span>Crop & Upload</span>\r\n\t\t\t\t\t\t      \t}\t\t\t\t\t\t      \t\r\n\t\t\t\t\t\t      </button>\t\t\t      \t\t\t\t\t\t\t\t\t      \r\n\t\t\t      \t\t</div>\r\n\t\t\t      \t:null\r\n\t\t\t      }\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"col-lg-6\">\r\n\t\t\t\t\t\t{\t\r\n\t\t\t\t\t\t\tproduct.thumbnail? \r\n\t\t\t\t\t\t\t\t<div className=\"mb-2 d-flex flex-column\">\r\n\t\t\t\t\t\t\t\t\t<Image src={product.thumbnail} \r\n\t\t\t\t\t\t\t\t\t\t\t\t style={{border:`2px solid green`}} \r\n\t\t\t\t\t\t\t\t\t\t\t\t className=\"img-fluid\" width=\"100\" />\r\n\t\t\t\t\t\t\t\t\t<small>Product Thumbnail</small>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t:null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t{fileData && fileData.length>0? fileData.map((item, i)=>{\r\n\t\t\t\t\t\t    return (\r\n\t\t\t\t\t\t\t    \t<Col xs={6} md={2} key={item.id}>\r\n\t\t\t\t\t\t\t\t    \t<div style={{border:`2px solid #dee2e6`}} >\r\n\t\t\t\t\t\t\t\t    \t\t<div className=\"p-1 d-flex justify-content-between\">\r\n\t\t\t\t\t\t\t\t\t    \t\t<Radio name=\"thumb\" size={0.8} onClick={e=>setDisplay(i)}/>\r\n\t\t\t\t\t\t\t\t\t    \t\t<i className=\"fal fa-times\" onClick={e=>removeImage(i)}></i> \r\n\t\t\t\t\t\t\t\t    \t\t</div>\r\n\t\t\t\t\t\t\t\t\t      <Image src={`${item.url}`} className=\"img-fluid\" />\r\n\t\t\t\t\t\t\t\t    \t</div>\r\n\t\t\t\t\t\t\t\t    </Col>\t\r\n\t\t\t\t\t\t\t    )\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}) :null}\r\n\t\t\t\t\t  </Row>\r\n\t\t\t\t\t</div>\t\r\n\t\t\t\t\t<div className=\"col\">\r\n\t\t\t\t\t\t<ImageGallery selected={selectedImages}/>\r\n\t\t\t\t\t</div>\t\t\t\t\r\n\t\t\t  </Form.Row>\r\n\t\t\t  <div className=\"d-flex justify-content-end\">\r\n\t\t\t  \t{\r\n\t\t\t  \t\tprops.create? \r\n\t\t\t\t  \t\t<button className=\"btn btn-sm btn_blue\" onClick={e=>saveProduct(e)}  type=\"button\">Save Product</button>\t\t\t\t  \r\n\r\n\t\t\t  \t\t: <button className=\"btn btn-sm btn_blue\" onClick={e=>updateProduct(e)}  type=\"button\">Update Product</button>\r\n\t\t\t  \t}\t\t\t\t  \r\n\t\t\t  </div>\r\n\t\t\t</Form>\r\n\t\t</div>\r\n\t\t)\r\n}\r\n\r\nexport default memo(Productform);"],"sourceRoot":""}