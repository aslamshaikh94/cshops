(this.webpackJsonpcshops=this.webpackJsonpcshops||[]).push([[27],{165:function(e,a,t){"use strict";t.r(a);var n=t(29),o=t(8),s=t(19),r=t(0),c=t.n(r),u=t(135),l=t(147),i=t(15),m=t.n(i),p=t(10),d=t(21),h=t(43),g=t(12);a.default=Object(r.memo)((function(){var e=Object(r.useContext)(h.a),a=e.data,t=e.dispatch,i=Object(d.useToasts)().addToast,f=Object(p.f)(),b=Object(r.useState)({username:"",password:""}),E=Object(s.a)(b,2),O=E[0],j=E[1],w=function(e){var a=e.target.name,t=e.target.value;j(Object(o.a)(Object(o.a)({},O),{},Object(n.a)({},a,t)))};var y=function(){O.username&&O.password?m.a.post("".concat(a.API_URL,"/auth/login"),O).then((function(e){e.data.status?(localStorage.setItem("auth",!0),localStorage.setItem("token",e.data.token),m.a.get("".concat(a.API_URL,"/users/user"),Object(g.a)()).then((function(e){t({type:"LOGGED_IN_USER",payload:e.data.user}),!1===e.data.status?(t({type:"FETCH_PRODUCTS",payload:""}),localStorage.setItem("auth",!1),localStorage.removeItem("token")):localStorage.setItem("auth",!0)})).catch((function(e){})),f.push("/admin/myprofile")):i(e.data.message,{appearance:"error",autoDismiss:!0,autoDismissTimeout:2e3})})).catch((function(e){i(e,{appearance:"error",autoDismiss:!0,autoDismissTimeout:2e3})})):i("Please inter field",{appearance:"error",autoDismiss:!0,autoDismissTimeout:2e3})};return c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",{className:"text-center"},"Login"),c.a.createElement("p",{className:"text-center"},"Log in with your email and password"),c.a.createElement(u.a,null,c.a.createElement(u.a.Group,null,c.a.createElement(u.a.Control,{placeholder:"User name",name:"username",onChange:function(e){return w(e)}})),c.a.createElement(u.a.Group,null,c.a.createElement(u.a.Control,{placeholder:"Password",type:"password",name:"password",onChange:function(e){return w(e)}})),c.a.createElement(l.a,{block:!0,type:"button",className:"login",onClick:function(e){return y()}},"Login")))}))}}]);
//# sourceMappingURL=27.e7327e5d.chunk.js.map