{"version":3,"sources":["pages/auth/components/Login.js"],"names":["memo","useContext","AppContext","data","dispatch","addToast","useToasts","history","useHistory","useState","user","setUser","changeInput","e","name","target","value","loginUser","username","password","axios","post","API_URL","then","res","status","localStorage","setItem","token","get","getToken","type","payload","removeItem","catch","err","push","message","appearance","autoDismiss","autoDismissTimeout","Fragment","className","Group","Control","placeholder","onChange","block","onClick"],"mappings":"wNA+EeA,0BAxED,WAAK,IAAD,EACQC,qBAAWC,KAA7BC,EADU,EACVA,KAAMC,EADI,EACJA,SAELC,EAAaC,sBAAbD,SACFE,EAAUC,cAJC,EAKOC,mBAAS,CAChC,SAAW,GACX,SAAW,KAPK,mBAKVC,EALU,KAKJC,EALI,KAUXC,EAAa,SAACC,GACnB,IAAIC,EAAOD,EAAEE,OAAOD,KAChBE,EAAQH,EAAEE,OAAOC,MACrBL,EAAQ,2BACJD,GADG,kBAELI,EAAQE,MAkBX,IAAMC,EAAY,WACdP,EAAKQ,UAAYR,EAAKS,SACxBC,IAAMC,KAAN,UAAclB,EAAKmB,QAAnB,eAAyCZ,GAAMa,MAAK,SAACC,GACjDA,EAAIrB,KAAKsB,QACXC,aAAaC,QAAQ,QAAQ,GAC7BD,aAAaC,QAAQ,QAASH,EAAIrB,KAAKyB,OAnB1CR,IAAMS,IAAN,UAAa1B,EAAKmB,QAAlB,eAAwCQ,eAAaP,MAAK,SAACC,GACvDpB,EAAS,CAAC2B,KAAK,iBAAkBC,QAAQR,EAAIrB,KAAKO,QAC7B,IAAlBc,EAAIrB,KAAKsB,QACRrB,EAAS,CAAC2B,KAAK,iBAAkBC,QAAQ,KACzCN,aAAaC,QAAQ,QAAQ,GAC7BD,aAAaO,WAAW,UAG1BP,aAAaC,QAAQ,QAAQ,MAE5BO,OAAM,SAACC,OAWX5B,EAAQ6B,KAAK,qBAGb/B,EAASmB,EAAIrB,KAAKkC,QAAS,CAAEC,WAAY,QAASC,aAAY,EAAOC,mBAAoB,SAExFN,OAAM,SAACC,GACT9B,EAAS8B,EAAK,CAAEG,WAAY,QAASC,aAAY,EAAOC,mBAAoB,SAI7EnC,EAAS,qBAAsB,CAAEiC,WAAY,QAASC,aAAY,EAAOC,mBAAoB,OAK/F,OACE,kBAAC,IAAMC,SAAP,KACC,wBAAIC,UAAU,eAAd,SACA,uBAAGA,UAAU,eAAb,uCACA,kBAAC,IAAD,KACK,kBAAC,IAAKC,MAAN,KACE,kBAAC,IAAKC,QAAN,CAAcC,YAAY,YAAY/B,KAAK,WAAWgC,SAAU,SAAAjC,GAAC,OAAED,EAAYC,OAEjF,kBAAC,IAAK8B,MAAN,KACE,kBAAC,IAAKC,QAAN,CAAcC,YAAY,WAAWd,KAAK,WAAWjB,KAAK,WAAWgC,SAAU,SAAAjC,GAAC,OAAED,EAAYC,OAEnG,kBAAC,IAAD,CAAQkC,OAAK,EAAChB,KAAK,SAASW,UAAU,QAAQM,QAAS,SAAAnC,GAAC,OAAEI,MAA1D","file":"static/js/27.e7327e5d.chunk.js","sourcesContent":["import React, {useState, useContext, memo} from 'react';\r\nimport {Button, Form} from 'react-bootstrap';\r\nimport axios from 'axios';\r\nimport {useHistory } from \"react-router-dom\";\r\nimport {useToasts } from 'react-toast-notifications';\r\nimport {AppContext} from '../../../App';\r\nimport {getToken} from '../../../methods/methods';\r\nconst Login = ()=>{\r\n\tconst {data, dispatch} = useContext(AppContext);\t\r\n\r\n\tconst { addToast } = useToasts()\r\n\tconst history = useHistory()\t\r\n\tconst [user, setUser] = useState({\r\n\t\t\"username\":\"\",\r\n\t\t\"password\":\"\"\r\n\t})\t\r\n\r\n\tconst changeInput =(e)=>{\r\n\t\tlet name = e.target.name;\r\n\t\tlet value = e.target.value;\r\n\t\tsetUser({\r\n\t\t\t...user,\r\n\t\t\t[name] : value\r\n\t\t})\t\t\r\n\t}\r\n\tfunction getUserDetails(){\r\n\t\taxios.get(`${data.API_URL}/users/user`, getToken() ).then((res)=>{\r\n      dispatch({type:'LOGGED_IN_USER', payload:res.data.user})\r\n      if(res.data.status===false){\r\n          dispatch({type:'FETCH_PRODUCTS', payload:''})\r\n          localStorage.setItem('auth', false)\r\n          localStorage.removeItem('token')\r\n        }\r\n      else{\r\n        localStorage.setItem('auth', true)\r\n      }\r\n      }).catch((err)=>{\r\n      // setError({message:err})\r\n    });\r\n\t}\r\n\tconst loginUser = ()=>{\r\n\t\tif(user.username && user.password){\r\n\t\t\taxios.post(`${data.API_URL}/auth/login`, user).then((res)=>{\r\n\t\t\t\tif(res.data.status){\r\n\t\t\t\t\tlocalStorage.setItem('auth', true)\r\n\t\t\t\t\tlocalStorage.setItem('token', res.data.token)\r\n\t\t\t\t\tgetUserDetails()\r\n\t\t\t\t\thistory.push('/admin/myprofile')\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\taddToast(res.data.message, { appearance: 'error', autoDismiss:true,  autoDismissTimeout :2000 })\r\n\t\t\t\t}\r\n\t\t\t}).catch((err)=>{\r\n\t\t\t\taddToast(err, { appearance: 'error', autoDismiss:true,  autoDismissTimeout :2000 })\r\n\t\t\t});\r\n\t\t}\r\n\t\telse{\t\t\t\r\n\t\t\taddToast('Please inter field', { appearance: 'error', autoDismiss:true,  autoDismissTimeout :2000 })\t\t\t\t\r\n\t\t}\t\t\r\n\t}\r\n\r\n\r\n\treturn(\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<h2 className=\"text-center\">Login</h2>\r\n\t\t\t\t<p className=\"text-center\">Log in with your email and password</p>\t\t\t\t\r\n\t\t\t\t<Form>\t\t\t      \r\n\t        <Form.Group>\r\n\t          <Form.Control placeholder=\"User name\" name=\"username\" onChange={e=>changeInput(e)} />\r\n\t        </Form.Group>\r\n\t        <Form.Group>\r\n\t          <Form.Control placeholder=\"Password\" type=\"password\" name=\"password\" onChange={e=>changeInput(e)} />\r\n\t        </Form.Group>\t        \r\n\t\t\t\t  <Button block type=\"button\" className=\"login\" onClick={e=>loginUser(e)}>Login</Button>\r\n\t\t\t\t</Form>\r\n\t\t\t</React.Fragment>\r\n\t\t)\r\n}\r\n\r\nexport default memo(Login);"],"sourceRoot":""}