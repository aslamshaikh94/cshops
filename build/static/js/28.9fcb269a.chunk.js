(this.webpackJsonpcshops=this.webpackJsonpcshops||[]).push([[28],{106:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return o}));var n=a(33),c=a(0),l=a.n(c),r=function(e){var t=e.col,a=e.formgroup,c=Object(n.a)(e,["col","formgroup"]);return l.a.createElement("div",{className:"form-group ".concat(a," ").concat(t?"col-lg-"+t+" col-12":"")},l.a.createElement("input",Object.assign({},c,{className:"form-control"})))},o=function(e){var t=e.col,a=Object(n.a)(e,["col"]);return l.a.createElement("div",{className:"form-group col-lg-".concat(t," col-12")},l.a.createElement("textarea",Object.assign({},a,{className:"form-control"})))}},209:function(e,t,a){"use strict";a.r(t);var n=a(108),c=a.n(n),l=a(31),r=a(109),o=a(113),s=a(5),u=a(16),i=a(0),m=a.n(i),d=a(124),p=a(205),f=a(138),b=a(111),g=a(125),E=a(204),h=a(137),v=a(110),O=a(15),j=a.n(O),y=a(186);function x(){var e=Object(y.a)(["  \n\n.tags-input {\n    display: flex;\n    align-items: center;\n    flex-wrap: wrap;\n    padding:5px 8px;\n    border: 1px solid rgb(214, 216, 218);\n    border-radius: 6px;\n    background:#fff;\n    font-size: 12px;\n    &:focus-within {\n        border: 1px solid #0052cc;\n    }\n    input {\n        flex: 1;\n        border: none;\n        &:focus {\n            outline: transparent;\n        }\n    }\n}\n\n#tags {\n    display: flex;\n    flex-wrap: wrap;\n    padding: 0;\n    margin: 0;\n}\n\n.tag {\n    width: auto;    \n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: #fff;\n    padding: 2px 10px;    \n    list-style: none;\n    border-radius: 6px;\n    margin: 2px 2px;\n    background: #004c8a;    \n    .tag-close-icon {\n        display: block;\n        width: 16px;\n        height: 16px;\n        line-height: 16px;\n        text-align: center;\n        font-size: 14px;\n        margin-left: 8px;\n        color: #0052cc;\n        border-radius: 50%;\n        background: #fff;\n        cursor: pointer;\n    }\n}\n\n  @media screen and (max-width: 567px) {\n      .tags-input {\n          width: calc(100vw - 32px);\n      }\n  }\n"]);return x=function(){return e},e}var N=a(187).a.div(x()),C=function(e){var t=m.a.useState([]),a=Object(u.a)(t,2),n=a[0],c=a[1];return m.a.createElement(N,null,m.a.createElement("div",{className:"tags-input"},m.a.createElement("ul",{id:"tags"},n?n.map((function(e,t){return m.a.createElement("li",{key:t,className:"tag"},m.a.createElement("span",{className:"tag-title"},e),m.a.createElement("span",{className:"tag-close-icon",onClick:function(){return e=t,void c(Object(o.a)(n.filter((function(t,a){return a!==e}))));var e}},"x"))})):null),m.a.createElement("input",{type:"text",onKeyUp:function(t){return"Enter"===t.key?function(t){""!==t.target.value&&(c([].concat(Object(o.a)(n),[t.target.value])),e.selectedTags([].concat(Object(o.a)(n),[t.target.value])),t.target.value="")}(t):null},placeholder:e.placeholder})))},_=a(206),w=a(30);var k=function(e){var t=Object(i.useContext)(w.a).data,a=Object(i.useState)(!1),n=Object(u.a)(a,2),c=n[0],l=n[1],r=Object(i.useState)(!1),s=Object(u.a)(r,2),d=s[0],p=s[1],f=Object(i.useState)([]),b=Object(u.a)(f,2),h=b[0],v=b[1];return Object(i.useEffect)((function(){j.a.get("".concat(t.API_URL,"/upload")).then((function(e){p(e.data)}))}),[]),m.a.createElement(m.a.Fragment,null,m.a.createElement(g.a,{className:"bg_green mt-2",onClick:function(){return l(!0)}},"Select to Gallery"),m.a.createElement(_.a,{backdrop:"static",scrollable:!0,show:c,onHide:function(){return l(!1)},size:"xl","aria-labelledby":"example-custom-modal-styling-title"},m.a.createElement(_.a.Header,{closeButton:!0},m.a.createElement(_.a.Title,{id:"example-custom-modal-styling-title"},"Image Gallery")),m.a.createElement(_.a.Body,null,m.a.createElement("div",{className:"row no-gutters"},d?d.map((function(e){var t=h.some((function(t){return t.id===e.public_id}));return m.a.createElement("div",{className:"col-lg-1 col-4",key:e.public_id,onClick:function(t){return a=e.public_id,void d.find((function(e){new Promise((function(t,n){e.public_id===a&&t({url:e.secure_url,id:e.public_id})})).then((function(e){v([].concat(Object(o.a)(h),[e]))}))}));var a}},m.a.createElement(E.a,{src:e.secure_url,style:{height:"120px",width:"120px"},className:t?"border border-success":null,thumbnail:!0}))})):null)),m.a.createElement(_.a.Footer,null,m.a.createElement(g.a,{variant:"primary",onClick:function(){e.selected(h),l(!1)}},"Select & Close"))))},P=a(106),S=a(19),R=a(191),T=a.n(R),U=(a(193),a(114)),A=a(11);t.default=Object(i.memo)((function(e){var t=Object(i.useContext)(w.a),a=t.data,n=t.dispatch,O=Object(i.useState)([]),y=Object(u.a)(O,2),x=y[0],N=y[1],_=Object(i.useState)(""),R=Object(u.a)(_,2),D=R[0],L=R[1],V=Object(i.useRef)(),F=Object(i.useRef)(),H=Object(S.useToasts)().addToast,I=Object(i.useState)([]),J=Object(u.a)(I,2),z=J[0],M=J[1],B=Object(i.useState)(0),G=Object(u.a)(B,2),W=G[0],K=(G[1],Object(i.useState)(!1)),q=Object(u.a)(K,2),Q=q[0],X=q[1],Y=Object(i.useRef)(null),Z=Object(i.useState)(e.data),$=Object(u.a)(Z,2),ee=$[0],te=$[1],ae={appearance:"error",autoDismiss:!0,autoDismissTimeout:2e3};Object(i.useEffect)((function(){var e=JSON.stringify({display:W,photosurl:z});ee&&z.length>0&&te(Object(s.a)(Object(s.a)({},ee),{},{photos:e,thumbnail:z[0].url}))}),[z,W]),Object(i.useEffect)((function(){var e=JSON.stringify(x);x.length>0&&te(Object(s.a)(Object(s.a)({},ee),{},{extra_fields:e}))}),[x]);function ne(){return ee.categories?ee.type?ee.product_name?ee.selling_price&&ee.selling_price?ee.venders_price?ee.stock?ee.warranty?ee.details&&ee.terms_conditions?!(ee.photos.length<=2)||(H("Please select photos",ae),!1):(H("Please enter details",ae),!1):(H("Please enter warranty",ae),!1):(H("Please enter stock",ae),!1):(H("Please enter venders price",ae),!1):(H("Please enter selling price",ae),!1):(H("Please enter product name",ae),!1):(H("Please select type",ae),!1):(H("Please select catagory",ae),!1)}function ce(){return(ce=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1===t||!Y){e.next=6;break}return X(!0),e.next=4,Y.current.getCroppedCanvas().toDataURL("image/jpeg");case 4:le(e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(e){j.a.post("".concat(a.API_URL,"/upload"),{image:e}).then((function(e){console.log(e.data),!1===e.data.status?H(e.data.message,ae):M([].concat(Object(o.a)(z),[e.data])),X(!1)}))}Object(i.useEffect)((function(){if(e.data&&e.data.photos){var t=JSON.parse(e.data.photos);M(t.photosurl)}}),[e.data.photos]),Object(i.useEffect)((function(){if(e.data&&e.data.extra_fields){var t=JSON.parse(e.data.extra_fields);N(t)}}),[e.data.extra_fields]);var re=function(){j.a.get("".concat(a.API_URL,"/product/admin/products"),Object(A.a)()).then((function(e){!1!==e.data.status&&n({type:"FETCH_PRODUCTS",payload:e.data})}))},oe=function(e){var t=e.target.name,a=e.target.value;te(Object(s.a)(Object(s.a)({},ee),{},Object(l.a)({},t,a)))};return m.a.createElement("div",{className:"p-3 mb-3 border-bottom"},m.a.createElement(d.a,null,m.a.createElement(d.a.Row,null,m.a.createElement("div",{className:"form-group col-lg-3 col-12"},m.a.createElement(d.a.Control,{as:"select",name:"categories",onChange:function(e){return oe(e)}},m.a.createElement("option",null,"Choose Categories"),m.a.createElement("option",{value:"industrial"},"Industrial"),m.a.createElement("option",{value:"construction"},"Construction"),m.a.createElement("option",{value:"agriculture"},"Agriculture"),m.a.createElement("option",{value:"housewares"},"Housewares"))),m.a.createElement("div",{className:"form-group col-lg-3 col-12"},m.a.createElement(d.a.Control,{as:"select",name:"type",onChange:function(e){return oe(e)}},m.a.createElement("option",null,"Choose Type"),m.a.createElement("option",{value:"Hand Tools"},"Hand Tools"),m.a.createElement("option",{value:"Automobile"},"Automobile"),m.a.createElement("option",{value:"Furniture"},"Furniture"),m.a.createElement("option",{value:"electrical"},"Electrical"))),m.a.createElement(P.a,{col:3,name:"product_name",placeholder:"Product Name",type:"text",defaultValue:ee.product_name,onChange:function(e){return oe(e)}}),m.a.createElement(P.a,{col:3,name:"purchase_price",placeholder:"Purchase Price",type:"number",defaultValue:ee.purchase_price,onChange:function(e){return oe(e)}}),m.a.createElement(P.a,{col:3,name:"selling_price",placeholder:"Selling Price",type:"number",defaultValue:ee.selling_price,onChange:function(e){return oe(e)}}),m.a.createElement(P.a,{col:3,name:"venders_price",placeholder:"Venders Price",type:"number",defaultValue:ee.venders_price,onChange:function(e){return oe(e)}}),m.a.createElement(P.a,{col:2,name:"stock",placeholder:"Stock",type:"number",defaultValue:ee.stock,onChange:function(e){return oe(e)}}),m.a.createElement(P.a,{col:2,name:"minorder",placeholder:"Min Order",type:"number",defaultValue:ee.minorder,onChange:function(e){return oe(e)}}),m.a.createElement(P.a,{col:2,name:"warranty",placeholder:"Warranty in Months",type:"number",defaultValue:ee.warranty,onChange:function(e){return oe(e)}})),m.a.createElement(d.a.Row,null,m.a.createElement("div",{className:"ml-1"},x?x.map((function(e,t){return m.a.createElement(p.a,{className:"bg_yellow white ml-1",key:e.name+t}," ","".concat(e.name," : ").concat(e.value))})):null),m.a.createElement("div",{className:"col-12 col-lg-6"},m.a.createElement(C,{selectedTags:function(e){var t=JSON.stringify(e);te(Object(s.a)(Object(s.a)({},ee),{},{keywords:t}))},placeholder:"Add search keyword"})),m.a.createElement("div",{className:"col-12 col-lg-4"},m.a.createElement(f.a,{className:"mb-3",size:"sm"},m.a.createElement(b.a,{placeholder:"Title",ref:V}),m.a.createElement(b.a,{placeholder:"Value",ref:F}),m.a.createElement(f.a.Prepend,null,m.a.createElement(g.a,{size:"sm",variant:"",className:"btn_green",type:"button",onClick:function(e){return function(){var e=V.current.value,t=F.current.value;e&&t&&(N([].concat(Object(o.a)(x),[{name:e,value:t}])),V.current.value="",F.current.value="")}()}},m.a.createElement("i",{className:"fal fa-plus"})," Add More"))))),m.a.createElement(d.a.Row,null,m.a.createElement(P.b,{col:6,name:"details",placeholder:"Details",value:ee.details,onChange:function(e){return oe(e)}}),m.a.createElement(P.b,{col:6,name:"terms_conditions",placeholder:"Terms and Conditions",value:ee.terms_conditions,onChange:function(e){return oe(e)}})),m.a.createElement(d.a.Row,null,m.a.createElement("div",{className:"col-lg-6"},m.a.createElement("div",{className:"custom-file"},m.a.createElement("input",{type:"file",className:"custom-file-input",onChange:function(e){return function(e){var t=window.URL.createObjectURL(e.target.files[0]);L(t)}(e)}}),m.a.createElement("label",{className:"custom-file-label",htmlFor:"customFile"},"Choose file")),D?m.a.createElement("div",{className:"mt-2 mb-2"},m.a.createElement(T.a,{ref:Y,src:D,style:{maxHeight:400,maxWidth:600,width:"100%"},aspectRatio:1,guides:!1})):null,D?m.a.createElement("div",null,m.a.createElement("button",{type:"button",className:"btn btn_orange",onClick:function(e){return L(!1),void j.a.get("".concat(a.API_URL,"/product/admin/products"),Object(A.a)()).then((function(e){!1!==e.data.status&&n({type:"FETCH_PRODUCTS",payload:e.data})}))}},"Cancel"),m.a.createElement("button",{type:"button",className:"btn btn_blue ml-2",onClick:function(e){return function(e){return ce.apply(this,arguments)}(e)},disabled:!!Q},Q?m.a.createElement("span",null,m.a.createElement("span",{className:"spinner-grow spinner-grow-sm"}),"Uploading.."):m.a.createElement("span",null,"Crop & Upload"))):null),m.a.createElement("div",{className:"col-lg-6"},ee.thumbnail?m.a.createElement("div",{className:"mb-2 d-flex flex-column"},m.a.createElement(E.a,{src:ee.thumbnail,style:{border:"2px solid green"},className:"img-fluid",width:"100"}),m.a.createElement("small",null,"Product Thumbnail")):null,m.a.createElement(h.a,null,z&&z.length>0?z.map((function(e,t){return m.a.createElement(v.a,{xs:6,md:2,key:e.id},m.a.createElement("div",{style:{border:"2px solid #dee2e6"}},m.a.createElement("div",{className:"p-1 d-flex justify-content-between"},m.a.createElement(U.Radio,{name:"thumb",size:.8,onClick:function(e){return function(e){te(Object(s.a)(Object(s.a)({},ee),{},{thumbnail:z[e].url}))}(t)}}),m.a.createElement("i",{className:"fal fa-times",onClick:function(e){return function(e){var t=z;t.splice(e,1),M(Object(o.a)(t))}(t)}})),m.a.createElement(E.a,{src:"".concat(e.url),className:"img-fluid"})))})):null)),m.a.createElement("div",{className:"col"},m.a.createElement(k,{selected:function(e){M([].concat(Object(o.a)(z),Object(o.a)(e)))}}))),m.a.createElement("div",{className:"d-flex justify-content-end"},e.create?m.a.createElement("button",{className:"btn btn-sm btn_blue",onClick:function(e){ne()&&j.a.post("".concat(a.API_URL,"/product/add"),ee,Object(A.a)()).then((function(e){!1===e.data.status?H(e.data.message,ae):(re(),H("Product added successfully",{appearance:"success",autoDismiss:!0,autoDismissTimeout:2e3}))}))},type:"button"},"Save Product"):m.a.createElement("button",{className:"btn btn-sm btn_blue",onClick:function(e){ne()&&j.a.put("".concat(a.API_URL,"/product"),ee,Object(A.a)()).then((function(e){console.log(e.data),!1===e.data.status?H(e.data.message,ae):(re(),H("Product 'updated' successfully",{appearance:"success",autoDismiss:!0,autoDismissTimeout:2e3}))}))},type:"button"},"Update Product"))))}))}}]);
//# sourceMappingURL=28.9fcb269a.chunk.js.map